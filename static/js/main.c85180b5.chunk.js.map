{"version":3,"sources":["global/AuthContext.js","global/api.js","pages/SignInUp/SignIn.js","pages/SignInUp/SignUp.js","global/CartContext.js","components/Navbar.js","components/Header.js","pages/EditMenu/component/Edit.js","components/EditWindow.js","pages/Home/component/Restaurant_Item.js","pages/Home/component/RestaurantList.js","pages/Home/component/DishList.js","components/Footer.js","components/Loader.js","pages/Home/Homepage.js","pages/Cart/component/Cart_Item.js","pages/Cart/Cart.js","components/CommentWindow.js","pages/Record/component/Record_Item.js","pages/Record/Record.js","pages/EditMenu/Editpage.js","App.js","reportWebVitals.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","props","useState","state","setState","Provider","value","children","axios","defaults","withCredentials","userRequest","create","baseURL","headers","dashboardRequest","interceptors","request","use","config","console","log","error","Promise","reject","response","status","window","navigator","onLine","alert","apiUserDetailsRequest","get","SignIn","userdata","setUserdata","pending","setpending","useContext","setUserContext","handleChange","e","target","name","prevData","className","onSubmit","data","preventDefault","post","then","a","token","catch","err","to","htmlFor","type","id","placeholder","onChange","required","disabled","CartContext","initialState","item","localStorage","getItem","JSON","parse","CartProvider","Navbar","moveNav","setmoveNav","userContext","totalCount","setTotalCount","cartItems","useEffect","reduce","prevValue","currentValue","count","lastScrollTop","handleScroll","scrollTop","pageYOffset","document","documentElement","addEventListener","passive","removeEventListener","style","top","href","onClick","Authorization","res","prev","datails","undefined","setItem","Date","now","removeItem","Header","setSearchValue","setSearching","Edit","title","editRestaurantId","dish","serviceHour","menuData","setMenuData","menuImg","setMenuImg","typeInput","setTypeinput","date","setDate","time","setTime","setDish","price","setPrice","menuImgUrl","setmenuImgUrl","history","useHistory","fetchUserDetails","useCallback","statusText","details","location","reload","prevdata","fileLoad","result","marginTop","restaurantID","formData","FormData","key","i","length","append","j","stringify","_id","put","apiUpLoadmenu","push","file","files","fileReader","FileReader","readAsDataURL","textAlign","src","alt","width","map","color","Object","entries","keys","values","EditWindow","hide","AOS","init","duration","display","backgroundColor","Restaurant_Item","cardImgSrc","cardTitle","cardContent","setRestaurantId","modalshow","setmodalshow","setEditRestaurantId","overflowY","role","background","borderColor","RestaurantList","searchValue","searching","setDishShow","setDishData","contentItem","setContentItem","sortedConfig","setSortedConfig","restaurantId","toogleType","setToogleType","params","testAsync","resolve","filterdata","filter","callerFun","handleSortConfig","direction","useMemo","sort","b","marginBottom","index","menu","restaurantName","DishList","dishData","lat","lng","markerPosition","setMarkerPosition","google","L","mapRef","useRef","markerRef","circleRef","setCartContext","starScore","setStarScore","messageData","setMessageData","current","setView","tileLayer","attribution","addTo","geocoder","maps","Geocoder","address","restaurantLocation","geocode","results","GeocoderStatus","OK","geometry","setLatLng","marker","bindPopup","openPopup","circle","fillColor","fillOpacity","radius","weight","flyTo","averageScore","apiGetMessage","scoreData","Sum","itemsNum","len","score","DishItem","dishName","orderName","oldValues","productIndex","findIndex","val","updatedCartItems","slice","MessageArea","messageContent","messageDate","class","height","zIndex","minHeight","restaurantPhone","content","Footer","Loader","Homepage","dishShow","userId","setUserId","userID","cookieValue","decodeURIComponent","cookie","replace","historyCart","CartItem","cartData","cartContext","Item","orderCount","Cart","setCartData","CommentWindow","commentBody","setCommentBody","setCurrentValue","hoverValue","setHoverValue","handleMouseLeave","handleSubmit","userCommentData","apiCreateMessage","StarRate","Array","fill","_","cursor","onMouseOver","onMouseLeave","CommentArea","RecordItem","Record","recordData","setrecordData","userid","textDecoration","Editpage","ProtectedLogin","auth","Component","component","rest","render","ProtectedRoute","App","verifyUser","setTimeout","synclogout","event","exact","path","SignUp","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c85180b5.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nconst AuthContext = React.createContext([{}, ()=>{}]);\r\n\r\nconst AuthProvider = props => {\r\n    const [state, setState] = useState({})\r\n    \r\n    return(\r\n        <AuthContext.Provider value = {[state, setState]}>\r\n            {props.children}\r\n        </AuthContext.Provider>\r\n    ) \r\n}\r\nexport  {AuthContext, AuthProvider};","import axios from \"axios\";\r\n\r\n//跨域請求時能正常發出附帶cookie的header\r\naxios.defaults.withCredentials = true; \r\n\r\n//users     \r\nconst userRequest = axios.create({\r\n    baseURL:'http://140.115.126.95:80/users',\r\n    headers:{\"Content-Type\":\"application/json\"},\r\n});\r\n\r\n//dashboard\r\nconst dashboardRequest = axios.create({ \r\n  baseURL:\"http://140.115.126.95:80/dashboard\",\r\n  headers:{\"Content-Type\":\"application/json\"},\r\n});\r\n\r\n//User interceptors \r\nuserRequest.interceptors.request.use(\r\n  config => { \r\n      console.log(config);\r\n      return config;\r\n  },\r\n  error => {\r\n      console.log(error);\r\n      return Promise.reject(error);\r\n  });\r\n\r\ndashboardRequest.interceptors.response.use(\r\nresponse => {\r\n    return response;\r\n},\r\nerror => {\r\n    if (error.response){\r\n        switch (error.response.status) {\r\n          case 404:\r\n            console.log(\"你要找的頁面不存在\")\r\n            // go to 404 page\r\n            break\r\n          case 500:\r\n            console.log(\"程式發生問題\")\r\n            // go to 500 page\r\n            break\r\n          default:\r\n            console.log(error.response)\r\n        }\r\n      } \r\n      if (!window.navigator.onLine) {\r\n        alert(\"網路出了點問題，請重新連線後重整網頁\");\r\n        return;\r\n      }\r\n    return Promise.reject(error);        \r\n});\r\n\r\n//User 相關的 api   \r\n//登入\r\nexport const apiUserLogin = (data) => userRequest.post('/login2',data);\r\n//登出\r\nexport const apiUserLogout = (config) => userRequest.get('/logout2',config);\r\n//註冊\r\nexport const apiUserRegister = (data) => userRequest.post('/signup',data);\r\n//使用者詳細資料\r\nexport const apiUserDetailsRequest = (config) => userRequest.get('/me',config);\r\n//refreshToken 驗證 \r\nexport const apiUserRefreshToken = () =>userRequest.post('/refreshToken');\r\n\r\n//餐廳內容 相關的 api\r\n//取得餐廳資料\r\nexport const apiContentItem = () => dashboardRequest.get('/restaurants');\r\n//餐廳評分資料\r\nexport const apiGetScore = (restaurantID) => dashboardRequest.get(`/score/${restaurantID}`);\r\n//餐廳留言資料\r\nexport const apiGetMessage = (restaurantID) => dashboardRequest.get(`/message/${restaurantID}`);\r\n//刪除餐廳資料\r\nexport const apiContentItemDelete = (id) => dashboardRequest.delete('/',id)\r\n//編輯餐廳資料\r\nexport const apiContentItemEdit = (restaurantID,data) => dashboardRequest.put(`/restaurant/${restaurantID}`,data)\r\n//餐廳資料上傳 \r\nexport const apiUpLoadmenu = (data) => dashboardRequest.post('/createMenu',data);\r\n\r\n//cart 相關的 api \r\n//購物車紀錄 (findCart )\r\nexport const apiCartRecord = (userID) => dashboardRequest.get(`/carts/${userID}`);\r\n//新增購物車(CreatCart)\r\nexport const apiCreatCart = (data) => dashboardRequest.post('/carts',data)\r\n\r\n//訂單紀錄 相關的 api\r\n//訂單紀錄\r\nexport const apiUserRecord = (userid) => dashboardRequest.get(`/orderRecord/${userid}`)\r\n//送出訂單\r\nexport const apiOrderDish = (data) => dashboardRequest.post('/orderRecord',data)\r\n//訂單評分\r\nexport const apiCreateScore = (data) => dashboardRequest.post('/score',data)\r\n//訂單餐廳留言\r\nexport const apiCreateMessage = (data) => dashboardRequest.post('/message',data)\r\n\r\n//搜尋 相關的 api\r\nexport const apiSearch = (config) => dashboardRequest.get('/search',config)\r\n","import React from 'react';\r\nimport './SignIn.css';\r\nimport {Link} from 'react-router-dom';\r\nimport { useState, useContext} from 'react';\r\nimport { AuthContext } from '../../global/AuthContext';\r\nimport { apiUserLogin } from '../../global/api';\r\n\r\nexport default function SignIn() { \r\n    const[userdata,setUserdata] = useState({})//data account password\r\n    const[pending,setpending] = useState(false) //Button pending\r\n    const[userContext,setUserContext] = useContext(AuthContext)\r\n\r\n//onChange event 帳號密碼input\r\n    const handleChange = (e) => {    \r\n        const{name, value} = e.target;\r\n        setUserdata(prevData =>({\r\n            ...prevData,\r\n            [name]:value\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = (e) =>{\r\n        e.preventDefault();//no refresh\r\n        setpending(true);\r\n        \r\n        // Login API\r\n        apiUserLogin(userdata)\r\n        .then(async response=>{\r\n            const data = await response.data\r\n            setUserContext( prevData => {\r\n                return{...prevData, token : data.token}\r\n            })\r\n             \r\n        })\r\n        .catch(err=>{\r\n            setpending(false);\r\n            console.log(err);\r\n        })\r\n        \r\n    }\r\n\r\n    return (  \r\n        <div className=\"banner\"> \r\n            <div className = \"container SignIncontext\">\r\n                <div className=\"row justify-content-md-end justify-content-sm-center\">\r\n                    <div className=\"col col-md-4 col-sm-12\">\r\n                        <form className =\"form\" onSubmit={handleSubmit}>\r\n                        <div className=\"row\">\r\n                            <span className=\"leftText col col-lg-7\">Sign In</span>\r\n                            <span className=\"rightText col col-lg-5 text-end\"><Link to=\"/SignUp\" >+Sign Up</Link></span>\r\n                        </div>\r\n                        <hr className=\"hr\"/> \r\n                            <div>\r\n                                <label htmlFor=\"username\" className=\"form-label\">Username</label>\r\n                                <input \r\n                                    type=\"email\" \r\n                                    name=\"username\"\r\n                                    id=\"username\" \r\n                                    className=\"form-control\"  \r\n                                    placeholder=\"Account\"  \r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />                        \r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n                                <input \r\n                                    type=\"password\" \r\n                                    name=\"password\" \r\n                                    id=\"password\"\r\n                                    className=\"form-control\" \r\n                                    placeholder=\"Password\"  \r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            {!pending&&<button type=\"submit\" className=\"btn btn-dark button\">Submit</button>}\r\n                            {pending&&<button type=\"submit\" className=\"btn btn-dark button\" disabled>Submitting...</button>}\r\n                        </form>\r\n                    </div>\r\n                </div>        \r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport './SignIn.css';\r\nimport {Link} from 'react-router-dom';\r\nimport { useState, useContext } from 'react';\r\nimport { AuthContext } from '../../global/AuthContext';\r\nimport { apiUserRegister } from '../../global/api';\r\n\r\nexport default function SignIn() { \r\n    const[userdata,setUserdata]=useState({})//data account password\r\n    const[pending,setpending]=useState(false) //Button pending\r\n    const[userContext,setUserContext] = useContext(AuthContext)\r\n    \r\n//onChange event 帳號密碼input\r\n    const handleChange = (e) => {    \r\n        const{name, value} = e.target;\r\n        setUserdata(prevData =>({\r\n            ...prevData,\r\n            [name]:value\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = (e) =>{\r\n        e.preventDefault();//no refresh\r\n        setpending(true);\r\n        \r\n        //Register API\r\n        apiUserRegister(userdata)\r\n        .then(async response=>{\r\n            const data = await response.data\r\n            setUserContext( prevData => {\r\n                return{...prevData, token : data.token}\r\n            })\r\n            setpending(false);    \r\n        })\r\n        .catch(err=>{\r\n            setpending(false);\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    return (  \r\n        <div className=\"banner\"> \r\n            <div className = \"container SignIncontext\">\r\n                <div className=\"row justify-content-md-end justify-content-sm-center\">\r\n                    <div className=\"col col-md-4 col-sm-12\">\r\n                        <form className =\"form\" onSubmit={handleSubmit}>\r\n                        <div className=\"row\">\r\n                            <span className=\"leftText col col-lg-7\">Sign Up</span>\r\n                            <span className=\"rightText col col-lg-5 text-end\"><Link to=\"/\" >+Sign In</Link></span>\r\n                        </div>\r\n                        <hr className=\"hr\"/> \r\n                            <div>\r\n                                <label htmlFor=\"username\" className=\"form-label\">Account</label>\r\n                                <input \r\n                                    type=\"email\" \r\n                                    name=\"username\" \r\n                                    id=\"username\"\r\n                                    className=\"form-control\"  \r\n                                    placeholder=\"Account\"  \r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />                       \r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n                                <input \r\n                                    type=\"password\" \r\n                                    name=\"password\" \r\n                                    id=\"password\"\r\n                                    className=\"form-control\"  \r\n                                    placeholder=\"password\"  \r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />                       \r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"firstName\" className=\"form-label\">FirstName</label>\r\n                                <input \r\n                                    type=\"text\" \r\n                                    name=\"firstName\"\r\n                                    id=\"firstName\" \r\n                                    className=\"form-control\"  \r\n                                    placeholder=\"fristname\"  \r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />                       \r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"lastName\" className=\"form-label\">LastName</label>\r\n                                <input \r\n                                    type=\"text\" \r\n                                    name=\"lastName\"\r\n                                    id=\"lastName\"\r\n                                    className=\"form-control\"  \r\n                                    placeholder=\"lastname\"  \r\n                                    onChange={handleChange}\r\n                                />                       \r\n                            </div>\r\n                            {!pending&&<button type=\"submit\" className=\"btn btn-dark button\">Submit</button>}\r\n                            {pending&&<button type=\"submit\" className=\"btn btn-dark button\" disabled>Submitting...</button>}\r\n                        </form>\r\n                    </div>\r\n                </div>        \r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport { useState} from \"react\";\r\nconst CartContext = React.createContext([{}, ()=>{}]);\r\n\r\nlet initialState = []\r\n\r\ntry {\r\n    //讓 Context 取得 localstorage 裡儲存的購物車資訊\r\n    //如果沒東西，初始值會變回空陣列\r\n    const item = window.localStorage.getItem(\"cartItems\")\r\n    initialState = item ? JSON.parse(item) : []\r\n  } catch (error) {\r\n        console.log(error);\r\n  }\r\n\r\nconst CartProvider = props => {\r\n    const [state, setState] = useState(initialState)\r\n    \r\n    return(\r\n        <CartContext.Provider value = {[state, setState]}>\r\n            {props.children}\r\n        </CartContext.Provider>\r\n    ) \r\n}\r\nexport  {CartContext, CartProvider};","import React from 'react';\r\nimport './Navbar.css';\r\nimport { useState, useEffect, useContext} from 'react';\r\nimport { AuthContext } from '../global/AuthContext';\r\nimport { apiUserLogout} from '../global/api';\r\nimport { CartContext } from '../global/CartContext';\r\n\r\nexport default function Navbar() {\r\n    const [moveNav, setmoveNav] = useState(0)\r\n    const [userContext, setUserContext] = useContext(AuthContext)\r\n    const [totalCount,setTotalCount] = useState(0)\r\n    //Cart count\r\n    const [cartItems] = useContext(CartContext)\r\n    useEffect(()=>{\r\n    //Loop through the items and find the total count\r\n    setTotalCount(cartItems.reduce(\r\n        //之前的值 + 現在處理的元素 => 舊值 + 新值 ， 0 是設定初始值\r\n        (prevValue, currentValue) => prevValue + currentValue.count,\r\n        0\r\n    ))\r\n    },[cartItems])\r\n    \r\n\r\n    //Logout\r\n    const handlerLogout = () => {\r\n        apiUserLogout({headers:{Authorization: `Bearer ${userContext.token}`}})\r\n        .then(async res => {\r\n            console.log(res);\r\n            setUserContext(prev =>{\r\n                return{...prev, datails:undefined , token:null}\r\n            })\r\n            window.localStorage.setItem(\"logout\",Date.now())\r\n            window.localStorage.removeItem(\"cartItems\")\r\n        })\r\n    }\r\n\r\n    //navbar hide &show\r\n    useEffect(()=>{\r\n        var lastScrollTop = 0;\r\n        const handleScroll = () => {\r\n          var scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n          if(scrollTop > lastScrollTop){\r\n            setmoveNav(-216)\r\n          }\r\n          else{\r\n            setmoveNav(0)\r\n          }\r\n          lastScrollTop = scrollTop;\r\n        }\r\n        window.addEventListener('scroll', handleScroll, {passive:true});\r\n        return ()=>\r\n        window.removeEventListener('scroll', handleScroll)\r\n      },[])\r\n\r\n    return (\r\n        <nav style={{top:moveNav}} className=\"navbar navbar-expand-lg navbar-dark\" >\r\n            <div className=\"container-fluid\">\r\n                <span className=\"navbar-brand\">WuberEat</span>\r\n                <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">                        \r\n                <a href=\"/#\" className=\"navbar-toggler-icon\"> </a>\r\n                </button>\r\n                <div className=\"collapse navbar-collapse \" id=\"navbarNav\">\r\n                    <ul className=\"navbar-nav ms-auto\">\r\n                        <li className=\"nav-item\">\r\n                            <a className=\"nav-link active\" aria-current=\"page\" href=\"/Homepage\">Home</a>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <a className=\"nav-link\" href=\"/Edit\"><i className=\"far fa-cloud-upload\"></i></a>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <a className=\"nav-link\" href=\"/Record\">\r\n                                <i className=\"far fa-file-alt\"></i>\r\n                            </a>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <a className=\"nav-link\" href=\"/Cart\">\r\n                                <i className=\"far fa-shopping-cart\"></i> \r\n                                {totalCount > 0 && <span className=\"cart_count\">{totalCount}</span>}\r\n                            </a>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <span className=\"nav-link\" onClick={handlerLogout}>Logout</span>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport './Header.css';\r\nexport default function Header({setSearchValue, setSearching}) {\r\n\r\n    const handleSearchChange = e =>{\r\n        const{name, value} = e.target;\r\n        setSearchValue(()=>({\r\n            [name]:value\r\n        }))\r\n    }\r\n    const handleSearching = ()=>{\r\n        setSearching(true)\r\n    }\r\n    return (\r\n        <div>\r\n            <div className=\"container kv\">\r\n                <div className=\"row justify-content-center align-items-center\">\r\n                    <div className=\"col-lg-6 col-sm-10\">\r\n                        <h1>今晚我想來點...</h1>\r\n                        <div className=\"search\">\r\n                            <input type=\"text\" name='search' className=\"form-control\" placeholder=\"Search...\" onChange={handleSearchChange}/> \r\n                            <button className=\"btn btn-outline-dark\" onClick={handleSearching}>\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </button> \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min'\r\nimport { useState, useContext, useCallback, useEffect} from 'react'\r\nimport { AuthContext } from '../../../global/AuthContext'\r\nimport { apiUpLoadmenu, apiUserDetailsRequest,apiContentItemEdit} from '../../../global/api'\r\n\r\nexport default function Edit({name,title,editRestaurantId}) {\r\n    const[menuData, setMenuData] = useState({type:[],dish:[],serviceHour:[]})\r\n    const[menuImg, setMenuImg] = useState(null)\r\n    const[typeInput, setTypeinput] = useState(\"\")\r\n    const[date, setDate] = useState(\"Mon\")\r\n    const[time,setTime] = useState(\"\")\r\n    const[dish,setDish] = useState(\"\")\r\n    const[price,setPrice] = useState(\"\")\r\n    const[menuImgUrl, setmenuImgUrl] = useState(\"\") \r\n    const[userContext, setUserContext] = useContext(AuthContext)\r\n    const history = useHistory()\r\n    \r\n    //表單需要user資料\r\n    const fetchUserDetails = useCallback(()=>{\r\n        apiUserDetailsRequest({\r\n            headers:{\r\n                Authorization: `Bearer ${userContext.token}`}\r\n        })\r\n        .then(async response =>{\r\n            if(response.statusText === 'OK'){\r\n                const data = await response.data\r\n                setUserContext( prevData =>{\r\n                    return{...prevData, details : data}\r\n                })\r\n            }else{\r\n                if(response.status === 401){\r\n                    window.location.reload()\r\n                }else{\r\n                    setUserContext( prevData =>{\r\n                        return{...prevData, details : null}\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    },[setUserContext, userContext.token])\r\n\r\n    useEffect(()=>{\r\n        if(!userContext.details){\r\n            fetchUserDetails()\r\n        }\r\n    },[userContext.details, fetchUserDetails])\r\n\r\n    //普通的表單內容\r\n    const handleChange = e =>{\r\n        const {name, value} = e.target;\r\n        setMenuData( prevdata =>({\r\n            ...prevdata,\r\n            [name]: value\r\n        }));\r\n    }\r\n\r\n    //Type input 取值\r\n    const handleTypeChange = e =>{\r\n        setTypeinput(e.target.value)\r\n    }\r\n    //放進 MenuData(物件)\r\n    const handleTypeClick = () =>{\r\n        setMenuData (prevData =>({\r\n            ...prevData,\r\n          type:[\r\n            ...menuData.type,\r\n            typeInput\r\n            ]\r\n        }));\r\n    }\r\n    \r\n    //Date & Time\r\n    const handleDateChange = e =>{\r\n        setDate(e.target.value);\r\n    }\r\n    const handleTimeChange = e =>{\r\n        setTime(e.target.value)\r\n    }\r\n    const handleServiceHourClick = () =>{\r\n        setMenuData( prevData =>({\r\n            ...prevData,\r\n            serviceHour:[\r\n                ...menuData.serviceHour,\r\n                {[date]:time}\r\n            ]\r\n        }))\r\n    }\r\n\r\n    //Dish & Price\r\n    const handleDishChange = e =>{\r\n        setDish(e.target.value)\r\n    }\r\n    const handlePriceChange = e =>{\r\n        setPrice(e.target.value)\r\n    }\r\n    const handleDishClick = () =>{\r\n        setMenuData( prevdata =>({\r\n            ...prevdata,\r\n            dish:[\r\n                ...menuData.dish,\r\n                {\r\n                    [dish]:price\r\n                }\r\n            ]\r\n        }))\r\n    }\r\n\r\n    //圖片\r\n    const handleImgChange = e =>{\r\n        const file = e.target.files[0];\r\n        setMenuImg(file);\r\n        const fileReader = new FileReader();\r\n        //Load監聽事件，等東西都弄好 \r\n        fileReader.addEventListener(\"load\",fileLoad); \r\n        //把file轉成字串URL\r\n        fileReader.readAsDataURL(file); \r\n    }\r\n\r\n    const fileLoad = e =>{\r\n        //拿上面轉好的URL\r\n        setmenuImgUrl(e.target.result) \r\n    }\r\n\r\n    //建立FormDat , append 表單內容\r\n    const handleSubmit = e =>{\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        //append 正常表單資料 \r\n        for(var key in menuData){\r\n            if(key === \"type\"){\r\n                for(var i = 0; i < menuData[key].length; i++){\r\n                    formData.append(`${key}[${i}]`,menuData[key][i])\r\n                }\r\n            }\r\n            else if(key === \"serviceHour\" || key === \"dish\" ){\r\n                for(var j = 0; j < menuData[key].length; j++){\r\n                    formData.append(`${key}[${j}]`,JSON.stringify(menuData[key][j]))\r\n                }\r\n            }else{\r\n                formData.append(key,menuData[key]);\r\n            } \r\n        };\r\n        //append Img\r\n        formData.append('menu',menuImg);\r\n        \r\n        //append user ID\r\n        formData.append('userId',userContext.details._id);\r\n\r\n        //上傳菜單 or 編輯菜單\r\n        if(name === \"Edit\"){\r\n            apiContentItemEdit(editRestaurantId,formData)\r\n            .then(response =>{\r\n                console.log(response);\r\n            }).catch(err =>{\r\n                console.log(err);\r\n            })\r\n        }else {\r\n            \r\n            apiUpLoadmenu(formData)\r\n            .then(response =>{\r\n                console.log(response);\r\n            }).catch(err=>{\r\n                console.log(err);\r\n            })\r\n        }\r\n\r\n        history.push('/Homepage')\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container\" style={{marginTop:80}}>\r\n                <div className=\"d-flex justify-content-center\">\r\n                    <h5>{title}</h5>\r\n                </div>\r\n                <div className=\"row justify-content-center\">\r\n                    <form className =\"form col-md-8 col-12\" onSubmit={handleSubmit}>   \r\n                        <div className='mb-3'>\r\n                            <label className=\"form-label\">餐廳名稱</label>\r\n                            <input type=\"text\" name=\"restaurantName\" className=\"form-control\"  placeholder=\"...\" required onChange={handleChange}/>                        \r\n                        </div>\r\n                        <div className='mb-3'>\r\n                            <label htmlFor=\"menuFile\" className=\"form-label\">餐廳菜單</label>\r\n                            <input className=\"form-control\" name=\"menu\" type=\"file\" id=\"menuFile\" required onChange={handleImgChange} />\r\n                            <div className='mx-3 my-3' style={{textAlign:'center'}}>\r\n                                <img  src={menuImgUrl} alt={menuImg} width={\"100%\"}/>\r\n                            </div>\r\n                        </div>\r\n                        <label className=\"form-label mb-2\">餐廳標籤</label>\r\n                        <div className=\"input-group mb-3\">\r\n                            <input type=\"text\" name=\"type\" className=\"form-control\" placeholder=\"...\" onChange={handleTypeChange}/>\r\n                            <button className=\"btn btn-outline-secondary\" type=\"button\" onClick={handleTypeClick}><i className=\"fas fa-plus\"></i></button>\r\n                        </div>\r\n                        <div>\r\n                            <div className='col mb-3'>\r\n                                {menuData.type.map(item =>  \r\n                                    <span style={{color:'rgb(80, 67, 161)'}}>&nbsp;#&nbsp;{item}</span> \r\n                                )}\r\n                            </div> \r\n                        </div>\r\n                        \r\n                        <div className='mb-3'>\r\n                            <label className=\"form-label\">餐廳電話</label>\r\n                            <input type=\"text\" name=\"restaurantPhone\" className=\"form-control\" placeholder=\"...\" onChange={handleChange}/>\r\n                        </div>\r\n                        <div className='mb-3'>\r\n                            <label className=\"form-label\">餐廳地址</label>\r\n                            <input type=\"text\" name=\"restaurantLocation\" className=\"form-control\" placeholder=\"...\" onChange={handleChange}/>\r\n                        </div>\r\n                            <label className=\"form-label\">餐廳營業時間</label>\r\n                            <div className=\"input-group mb-3\">\r\n                                <span className=\"input-group-text\" id=\"inputGroupSelect\">日期</span>\r\n                                <select className=\"form-select\" id=\"inputGroupSelect01\" onChange={handleDateChange}>\r\n                                    <option value=\"Mon\">星期一</option>\r\n                                    <option value=\"Tue\">星期二</option>\r\n                                    <option value=\"Wed\">星期三</option>\r\n                                    <option value=\"Thu\">星期四</option>\r\n                                    <option value=\"Fri\">星期五</option>\r\n                                    <option value=\"Sat\">星期六</option>\r\n                                    <option value=\"Sun\">星期日</option>\r\n                                </select>\r\n                                <span className=\"input-group-text\">時間</span>\r\n                                <input type=\"text\" name=\"serviceHour\" className=\"form-control\" placeholder=\"...\" onChange={handleTimeChange}/>\r\n                                <button className=\"btn btn-outline-secondary\" type=\"button\" onClick={handleServiceHourClick}><i className=\"fas fa-plus\"></i></button>\r\n                            </div>\r\n                            {\r\n                                 Object.entries(menuData.serviceHour).map(([key,value]) => {\r\n                                    return (\r\n                                        <div className='row' key={key}>\r\n                                            <div className='col-1'>\r\n                                                <span className='mt-1' key={key}>\r\n                                                    {Object.keys(value)}\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className='col-1'>\r\n                                                <span className='mt-1' key={key}>\r\n                                                    :\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className='col-1'>\r\n                                                <span className='mt-1' key={key}>\r\n                                                    {Object.values(value)}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            }\r\n                        \r\n                        <div className='mt-3 mb-3'>\r\n                            <label className=\"form-label\">餐廳餐點</label>\r\n                            <div className=\"input-group\">\r\n                                <span className=\"input-group-text\" id=\"inputGroupSelect\" >餐點</span>\r\n                                <input type=\"text\" name=\"dishName\" className=\"form-control\" placeholder=\"...\" onChange={handleDishChange}/>\r\n                                <span className=\"input-group-text\">價錢</span>\r\n                                <input type=\"text\" name=\"price\" className=\"form-control\" placeholder=\"...\" onChange={handlePriceChange}/>\r\n                                <button className=\"btn btn-outline-secondary\" type=\"button\" onClick={handleDishClick}><i className=\"fas fa-plus\"></i></button>\r\n                            </div>\r\n                        </div>\r\n                        {\r\n                                 Object.entries(menuData.dish).map(([key,value]) => {\r\n                                    return (\r\n                                        <div className='row' key={key}>\r\n                                            <div className='col-1'>\r\n                                                <span className='mt-1' key={key}>\r\n                                                    {Object.keys(value)}\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className='col-1'>\r\n                                                <span className='mt-1' key={key}>\r\n                                                    :\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className='col-1'>\r\n                                                <span className='mt-1' key={key}>\r\n                                                    {Object.values(value)}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            }\r\n                        \r\n                       <button type=\"submit\" className=\"btn btn-outline-warning w-100 mt-4\">{name}</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import React ,{useEffect}from 'react'\r\nimport Edit from '../pages/EditMenu/component/Edit'\r\nexport default function EditWindow({hide,editRestaurantId}) {\r\n    let modelStyle ={\r\n        display:'block',\r\n        backgroundColor:'rgba(156, 156, 156,0.7)'\r\n    }\r\n    \r\n    const closemodel = () =>{\r\n        hide(false)\r\n    }\r\n\r\n    useEffect(() => {    \r\n        window.AOS.init({\r\n          duration : 500\r\n        });\r\n    }, []);\r\n    \r\n    return (\r\n        <div className=\"modal\" style={modelStyle} data-aos=\"fade-down\" data-aos-offset=\"250\">\r\n            <div className=\"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable justify-content-center\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header \">\r\n                        <h5 className=\"modal-title\"><i className=\"far fa-edit\"></i></h5>\r\n                        <button type=\"button\" className=\"btn-close\" onClick={closemodel}/>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <Edit name={\"Edit\"} title={\"編輯資訊\"} editRestaurantId={editRestaurantId}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './Restaurant_Item.css'\r\nimport EditWindow from '../../../components/EditWindow';\r\nimport { useState, useEffect} from 'react';\r\nimport { apiContentItemDelete } from '../../../global/api';\r\n\r\nexport default function Restaurant_Item({cardImgSrc,cardTitle, cardContent,id,setRestaurantId}) {\r\n    const [modalshow,setmodalshow] = useState(false)\r\n    const [editRestaurantId,setEditRestaurantId] = useState(null)\r\n    \r\n    //刪除\r\n    const deleteMenu = () =>{\r\n      // apiContentItemDelete(cardTitle)\r\n      // .then(res=>{\r\n      //   console.log(res);\r\n      // })\r\n      // .catch(err =>{\r\n      //   console.log(err);\r\n      // })\r\n    }\r\n\r\n    //編輯\r\n    const EditMenu = () =>{\r\n      setmodalshow(true)\r\n      setEditRestaurantId(id)\r\n    }\r\n\r\n    //加入購物車 => DishList\r\n    const moreMenu = () => {\r\n        setRestaurantId(id)\r\n      }\r\n      \r\n    //AOS\r\n    useEffect(() => {    \r\n        window.AOS.init({\r\n          duration : 1000\r\n        });\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <div className=\"col-6 col-md-3 pb-3\">\r\n            <div className=\"card card-custom bg-white border-white border-0\" data-aos=\"fade-down\" data-aos-offset=\"250\"> \r\n                <img src={`http://localhost:80/${cardImgSrc}`} className=\"card-custom-img\" alt=\"...\" />\r\n                <div className=\"card-custom-edit\" onClick={EditMenu}>\r\n                    <i className=\"far fa-edit\"></i>\r\n                </div>\r\n                <div className=\"card-body\" style={{overflowY: \"auto\"}}>\r\n                    <h5 className=\"card-title\">{cardTitle}</h5>\r\n                    <div className=\"card-text\">\r\n                      <div className='row'>\r\n                          {cardContent.map(item =>{\r\n                            return(\r\n                              <div className=\"col-12\" role=\"alert\" >\r\n                                <h5 style={{color:'rgb(80, 67, 161)'}}>#{item}</h5>\r\n                              </div> \r\n                            );\r\n                          })}\r\n                      </div> \r\n                    </div>\r\n                </div>\r\n                <div className=\"card-footer px-1\" style={{background:\"inherit\",borderColor:\"inherit\"}}>\r\n                    <button type=\"button\" className=\"btn btn-outline-primary me-2\" onClick={moreMenu}>More...</button>\r\n                    <button type=\"button\" className=\"btn btn-outline-danger\" onClick={deleteMenu}><i className=\"fas fa-trash-alt\"></i></button>\r\n                </div>\r\n            </div>\r\n            {modalshow && <EditWindow hide={setmodalshow} editRestaurantId={editRestaurantId}/>}\r\n        </div>\r\n           \r\n    )\r\n}\r\n","import React from 'react'\r\nimport Restaurant_Item from './Restaurant_Item';\r\nimport './restaurantList.css'\r\nimport {useState,useEffect, useMemo } from 'react';\r\nimport { apiContentItem, apiSearch } from '../../../global/api';\r\n\r\nexport default function RestaurantList({searchValue, searching, setSearching,setDishShow,setDishData}) {\r\n    const[contentItem,setContentItem] = useState([])\r\n    const[sortedConfig,setSortedConfig] = useState({key:null})\r\n    const[restaurantId,setRestaurantId] = useState(\"\")\r\n    const[toogleType,setToogleType] = useState(false)\r\n    //Content Item 初始 render\r\n    useEffect(()=>{\r\n        apiContentItem()\r\n        .then(res=>{\r\n            setContentItem(res.data);\r\n        })\r\n        .catch(err=>{\r\n            console.log(err);\r\n        })\r\n    },[])\r\n\r\n    //搜尋後重發request\r\n    useEffect(()=>{\r\n        if(searching === true){\r\n            apiSearch({params:searchValue})\r\n            .then(res=>{\r\n                console.log(res);\r\n                setContentItem(res.data);\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n           setSearching(false)\r\n        }\r\n    },[searching])\r\n\r\n    //把資料過濾後特定的餐廳資料傳上去給 <DishList /> 拿到\r\n    useEffect(()=>{\r\n        function testAsync(){\r\n            return new Promise((resolve,reject)=>{\r\n                //here our function should be implemented \r\n                const filterdata = contentItem.filter(item => item._id === restaurantId)\r\n                resolve();\r\n                setDishData(filterdata)\r\n            });\r\n        }\r\n        \r\n        async function callerFun(){\r\n            await testAsync();\r\n            if(restaurantId !== \"\"){\r\n                setDishShow(true)\r\n            }\r\n        }\r\n        \r\n        callerFun();\r\n        \r\n    },[restaurantId])\r\n\r\n    //sort\r\n    const handleSortConfig = key =>{\r\n        setToogleType(key);\r\n        let direction = \"ascending\";\r\n        if(sortedConfig.key === key && sortedConfig.direction === \"ascending\"){\r\n            direction = \"descending\"\r\n            setToogleType(null);\r\n        }\r\n        setSortedConfig({key, direction})\r\n    }\r\n\r\n    useMemo(()=>{\r\n        let sortedItem = contentItem;\r\n        if(sortedConfig !== null){\r\n            sortedItem.sort((a, b) => {\r\n                if (a[sortedConfig.key] < b[sortedConfig.key]) {\r\n                  return sortedConfig.direction === \"ascending\" ? -1 : 1;\r\n                }\r\n                if (a[sortedConfig.key] > b[sortedConfig.key]) {\r\n                  return sortedConfig.direction === \"ascending\" ? 1 : -1;\r\n                }\r\n                return 0;\r\n              });\r\n            \r\n        }\r\n    },[contentItem,sortedConfig])\r\n\r\n    \r\n    \r\n\r\n    return (\r\n        <div className=\"container cardcontainer mt-4\" style={{marginBottom:80}}>\r\n            <div className=\"container mb-3\">\r\n                <div className='row justify-content-start'>\r\n                    <div className='col col-md-3 sort-option' >\r\n                        <button type=\"button\" className=\"sort-text\" onClick={()=> handleSortConfig(\"popular\")}>\r\n                            Popular\r\n                            {toogleType !== \"popular\" && <i className=\"fas fa-sort-up sort-icon\" ></i>}\r\n                            {toogleType === \"popular\" && <i className=\"fas fa-sort-down sort-icon2\"></i>}\r\n                        </button>\r\n                    </div>\r\n                    <div className='col col-md-3 sort-option'>\r\n                        <button type=\"button\" className=\"sort-text\" onClick={()=> handleSortConfig(\"createdAt\")}>\r\n                            Date\r\n                            {toogleType !== \"createdAt\" && <i className=\"fas fa-sort-up sort-icon\" ></i>}\r\n                            {toogleType === \"createdAt\" && <i className=\"fas fa-sort-down sort-icon2\"></i>}\r\n                        </button>\r\n                    </div>\r\n                    <div className='col col-md-3 sort-option'>\r\n                        <button type=\"button\" className=\"sort-text\" onClick={()=> handleSortConfig(\"restaurantName\")}>\r\n                            Name\r\n                            {toogleType !== \"restaurantName\" && <i className=\"fas fa-sort-up sort-icon\" ></i>}\r\n                            {toogleType === \"restaurantName\" && <i className=\"fas fa-sort-down sort-icon2\"></i>}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                {contentItem.map((item,index) =>{\r\n                    const{ menu,restaurantName ,type, _id} = item\r\n                    return(\r\n                        <Restaurant_Item \r\n                            setDishData={setDishData}\r\n                            setRestaurantId={setRestaurantId}\r\n                            cardImgSrc={menu} \r\n                            cardTitle={restaurantName} \r\n                            cardContent={type}\r\n                            key={_id}\r\n                            id={_id}\r\n                        />\r\n                    );  \r\n                })}    \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useState, useEffect, useRef,useContext} from 'react';\r\nimport {CartContext} from '../../../global/CartContext'\r\nimport { apiGetScore,apiGetMessage } from '../../../global/api';\r\n\r\nexport default function DishList({dishData}) {\r\n    const [markerPosition, setMarkerPosition] = useState({lat:24.968281,lng:121.192889});\r\n    const {lat,lng} = markerPosition;\r\n    const google = window.google; //Google Geocode Api\r\n    const L = window.L; //Leaflet.js\r\n    const mapRef = useRef(null); \r\n    const markerRef = useRef(null); \r\n    const circleRef = useRef(null); \r\n    //以上與 Map 相關\r\n    const [cartContext,setCartContext] = useContext(CartContext); //cart\r\n    const restaurantId = dishData[0]._id;\r\n    const [starScore,setStarScore] = useState(0);\r\n    const [messageData,setMessageData] = useState([]);\r\n\r\n    \r\n\r\n    const handleFlyTo = () =>{\r\n        mapRef.current.flyTo(markerPosition, 15, {\r\n            duration: 2\r\n        });\r\n    }\r\n\r\n    //Create Map\r\n    useEffect(()=>{\r\n        mapRef.current = L.map(\"map\").setView([24.968281, 121.192889], 15);\r\n        const tileUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\r\n        const attribution =  '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>';\r\n        const tiles = L.tileLayer(tileUrl, { attribution }); //圖層設定\r\n        tiles.addTo(mapRef.current); //新增圖層\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n        var geocoder = new google.maps.Geocoder();\r\n        var address = `${dishData[0].restaurantLocation}`\r\n        //根據店家地址發 request 給 Google Geocoder api 取 Lat & Lng\r\n        geocoder.geocode( { 'address': address}, function(results, status) {\r\n        if (status === google.maps.GeocoderStatus.OK)\r\n        {\r\n            setMarkerPosition({\r\n                lat: results[0].geometry.location.lat(),\r\n                lng: results[0].geometry.location.lng()\r\n            });\r\n        }\r\n        });\r\n    },[])\r\n\r\n    //Add Marker \r\n    useEffect(()=>{\r\n        if (markerRef.current) {\r\n            markerRef.current.setLatLng(markerPosition);\r\n            circleRef.current.setLatLng(markerPosition);\r\n          } else {\r\n            markerRef.current = L.marker(markerPosition).addTo(mapRef.current);\r\n            markerRef.current.bindPopup(`<b>${dishData[0].restaurantName}</b><br>${dishData[0].restaurantLocation}`).openPopup();\r\n            circleRef.current = L.circle(markerPosition, {\r\n                                color: \"red\",\r\n                                fillColor: \"#f03\",\r\n                                fillOpacity: 0.5,\r\n                                radius: 10,\r\n                                weight:1\r\n                                }).addTo(mapRef.current);\r\n            }\r\n        handleFlyTo()\r\n    },[markerPosition])\r\n    //取得餐廳score & Message\r\n    useEffect(()=>{\r\n        apiGetScore(restaurantId)\r\n        .then(async res=>{\r\n            console.log(res);\r\n            const data = await res.data\r\n            averageScore(data)\r\n        }).catch(err=>{\r\n            console.log(err);\r\n        })\r\n\r\n        apiGetMessage(restaurantId)\r\n        .then(async res=>{\r\n            console.log(res);\r\n            const data = await res.data\r\n            setMessageData(data)\r\n        }).catch(err=>{\r\n            console.log(err);\r\n        })\r\n    },[])\r\n\r\n    const averageScore = (scoreData)=>{  \r\n        let Sum = 0;\r\n        let itemsNum = 0;\r\n        const len = scoreData.length;\r\n        let item = null;\r\n        for (let i = 0; i < len; i++) {\r\n            item = scoreData[i];\r\n            if (item !== null) {\r\n                Sum = item.score + Sum;\r\n                itemsNum = itemsNum + 1;\r\n            }\r\n        }\r\n        const starScore = Sum / itemsNum;\r\n        setStarScore(starScore)\r\n        console.log(messageData);\r\n    }\r\n\r\n    //餐點列表 component\r\n    const DishItem = ({key,restaurantName,restaurantId,dishName,price}) =>{\r\n        //加入購物車 \r\n        const addCart=()=>{\r\n            const orderName = dishName[0]\r\n            setCartContext(oldValues => {\r\n              const productIndex = oldValues.findIndex(\r\n                val => val.orderName === orderName\r\n              )\r\n              let updatedCartItems = []\r\n              //如果 item 已經在 Cart 裡面的話\r\n              if (productIndex !== -1) {\r\n                updatedCartItems = [\r\n                  //在陣列裡面該 item 前面的物件\r\n                    ...oldValues.slice(0, productIndex),\r\n                  //在陣列裡面同樣的那個 item 數量+1\r\n                    {\r\n                        orderName,\r\n                        count: oldValues[productIndex].count + 1,\r\n                    },\r\n                  //在陣列裡該 item 後面的物件\r\n                    ...oldValues.slice(productIndex + 1),\r\n                  ]\r\n              } else {\r\n                //item 原本沒在 Cart 裡面 ，保留其他舊的物件， 新增 item 進去\r\n                updatedCartItems = [...oldValues, { orderName, count: 1 }]\r\n              }\r\n\r\n              //把購物車資料放在 localstorage 裡面\r\n              try {\r\n                window.localStorage.setItem(\"cartItems\", JSON.stringify(updatedCartItems))\r\n                window.localStorage.setItem(\"restaurantName\", restaurantName)\r\n                window.localStorage.setItem(\"restaurantId\",restaurantId)\r\n              } catch (e) {\r\n                console.error(\"Error in storing cart items in local storage\")\r\n              }\r\n              return updatedCartItems\r\n            })\r\n        }\r\n\r\n        return(\r\n            <>\r\n            <div className=\"row g-0 justify-content-center align-items-center mb-3\" key={key}>\r\n                    <div className=\"col-3 me-4\">\r\n                        <img src=\"https://picsum.photos/1200/600?random=10\" className=\"rounded-start cart_item_img \" alt=\"...\" />\r\n                    </div>\r\n                    <div className=\"col-3 cost_item\" >                                   \r\n                        <h5>{dishName}</h5>\r\n                    </div>\r\n                    <div className=\"col-2 cost_item\" >\r\n                        <h5>${price}</h5>   \r\n                    </div>\r\n                    <div className=\"col-3 cost_item\" >\r\n                        <button type=\"button\" className=\"btn btn-outline-primary me-2\" onClick={addCart}>addCart</button>\r\n                    </div>\r\n                </div>\r\n                <hr className=\"mt-4\"/>\r\n            </>\r\n        )\r\n    }\r\n    \r\n    //Message Component\r\n    const MessageArea = ({messageContent,messageDate})=>{\r\n        return(\r\n            \r\n                <div className='col'>\r\n                    <div class=\"alert alert-primary\" role=\"alert\">\r\n                    <h4 class=\"alert-heading\">Comment:</h4>\r\n                    <p>{messageContent}</p>\r\n                    <hr />\r\n                    <p class=\"mb-0 text-end\">{messageDate}</p>\r\n                    </div>\r\n                </div>\r\n            \r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <div className=\"col mt-4\">\r\n            <h5 style={{textAlign:'center'}}>{dishData[0].restaurantName}</h5>\r\n        </div>\r\n        <hr className=\"mt-4\"/>\r\n        <div className='container mb-4'>\r\n            <div className='row justify-content-center'>\r\n                <div className='col-12 col-md-8'>\r\n                    <div id=\"map\" style={{ height: \"50vh\", width: \"100%\", zIndex:\"1\",minHeight:350 }} />\r\n                </div>\r\n                <div className='col-12 col-md-4 mt-2'>\r\n                    <div className='row mt-2'>\r\n                        <div className='col-1'>\r\n                            <i className=\"far fa-star\"></i>\r\n                        </div>\r\n                        <div className='col'>\r\n                            <h5>{starScore}</h5>\r\n                        </div>\r\n                    </div>\r\n                    <div className='row mt-2'>\r\n                        <div className='col-1'>\r\n                            <i className=\"far fa-phone-alt\"></i>\r\n                        </div>\r\n                        <div className='col'>\r\n                            <h4>{dishData[0].restaurantPhone}</h4>\r\n                        </div>\r\n                    </div>\r\n                    <div className='row mt-2'>\r\n                        <div className='col-1'>\r\n                            <i className=\"far fa-clock\"></i>\r\n                        </div>\r\n                        <div className='col'>\r\n                            {   \r\n                                Object.entries(dishData[0].serviceHour).map(([key,value]) => {\r\n                                    return (\r\n                                        <div className='row' key={key}>\r\n                                            <div className='col-2'>\r\n                                                <h5 className='mt-1' key={key}>\r\n                                                    {Object.keys(value)}\r\n                                                </h5>\r\n                                            </div>\r\n                                            <div className='col-1'>\r\n                                                <h5 className='mt-1' key={key}>\r\n                                                    :\r\n                                                </h5>\r\n                                            </div>\r\n                                            <div className='col-2'>\r\n                                                <h5 className='mt-1' key={key}>\r\n                                                    {Object.values(value)}\r\n                                                </h5>\r\n                                            </div>\r\n                                        </div>\r\n                                        \r\n                                        \r\n                                    );\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"container mb-4\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <h4 className='mb-2'><i className=\"fas fa-utensils\"></i>&nbsp;餐點</h4>\r\n                {   \r\n                    Object.entries(dishData[0].dish).map(([key,value]) => {\r\n                        const restaurantName = dishData[0].restaurantName\r\n                        const dishName = Object.keys(value)\r\n                        const price = Object.values(value)\r\n                        return (\r\n                            <>\r\n                                <DishItem key={key} restaurantName={restaurantName} restaurantId={restaurantId} dishName={dishName} price={price}/>\r\n                            </>\r\n                        );\r\n                    })\r\n                }\r\n                </div>    \r\n            </div>\r\n        </div>\r\n        <div className=\"container mb-4\">\r\n            <div className='row'>\r\n                {Object.entries(messageData).map(([key,value], i) => {\r\n                    const messageContent = value.content\r\n                    const messageDate = value.date\r\n                    return(\r\n                        <MessageArea messageContent={messageContent} messageDate={messageDate}/>\r\n                    ) \r\n                })}\r\n            </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './Footer.css'\r\n\r\nexport default function Footer() {\r\n    return (\r\n        <footer className=\"container-fluid footerbg navbar-fixed-bottom\">\r\n            <div className=\"row justify-content-center align-items-center\">\r\n                <div className=\"col-4\">\r\n                    <span className=\"text\">\r\n                        WUbeR  \r\n                    </span>\r\n                    <span className=\"sub_text\">\r\n                        EaT  \r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Loader() {\r\n    const loderStle ={\r\n        height :'100vh',\r\n        backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n    }\r\n    return (\r\n        <div className=\"d-flex justify-content-center align-items-center\" style={loderStle}>\r\n            <div className=\"spinner-border text-warning\" role=\"status\" style={{width:70, height:70}}>\r\n                <span className=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n        </div>   \r\n    )\r\n}\r\n","import React from 'react';\r\nimport Navbar from '../../components/Navbar';\r\nimport Header from '../../components/Header';\r\nimport RestaurantList from './component/RestaurantList';\r\nimport DishList from './component/DishList';\r\nimport Footer from '../../components/Footer'; \r\nimport Loader from '../../components/Loader';\r\nimport { AuthContext } from '../../global/AuthContext';\r\nimport {useCallback, useContext, useEffect,useState} from 'react';\r\nimport { apiUserDetailsRequest,apiCartRecord } from '../../global/api';\r\n\r\nexport default function Homepage() {\r\n    const [userContext, setUserContext] = useContext(AuthContext)\r\n    const [searchValue,setSearchValue] = useState({})\r\n    const [searching,setSearching] = useState(false)\r\n    const [dishShow,setDishShow] = useState(false)\r\n    const [dishData,setDishData] = useState(null)\r\n    const [userId,setUserId] = useState(\"\");\r\n    \r\n\r\n    const fetchUserDetails = useCallback(()=>{\r\n        apiUserDetailsRequest({\r\n            headers:{\r\n                Authorization: `Bearer ${userContext.token}`}\r\n        })\r\n        .then(async response =>{\r\n            if(response.statusText === 'OK'){\r\n                //console.log(response);\r\n                const data = await response.data\r\n                setUserId(data._id)\r\n                setUserContext( prevData =>{\r\n                    return{...prevData, details : data}\r\n                })\r\n            }else{\r\n                if(response.status === 401){\r\n                    window.location.reload()\r\n                }else{\r\n                    setUserContext( prevData =>{\r\n                        return{...prevData, details : null}\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    },[setUserContext, userContext.token])\r\n\r\n    useEffect(()=>{\r\n        if(!userContext.details){\r\n            fetchUserDetails()\r\n        }\r\n    },[userContext.details, fetchUserDetails])\r\n    \r\n    //查看是否有購物車紀錄\r\n    useEffect(()=>{\r\n        if( userId !== \"\"){\r\n            apiCartRecord(userId)\r\n            .then(res=>{\r\n                let cookieValue = decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\\s*)cart\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\"));\r\n                let historyCart = JSON.parse(cookieValue)\r\n                window.localStorage.setItem(\"cartItems\", JSON.stringify(historyCart.history[0].dish[0]))\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n        }\r\n    },[userId])\r\n\r\n    return  userContext.details === null?(\r\n        \"Error Loading\"\r\n    ) : !userContext.details ?(\r\n        <Loader />\r\n    ):(\r\n        <>\r\n            <Navbar /> \r\n            <Header \r\n                setSearchValue={setSearchValue} \r\n                setSearching={setSearching} \r\n            />\r\n            {\r\n                !dishShow?(\r\n                <RestaurantList \r\n                    searchValue={searchValue} \r\n                    searching={searching} \r\n                    setSearching={setSearching} \r\n                    setDishShow={setDishShow}\r\n                    setDishData={setDishData}\r\n                />\r\n                ):(\r\n                    <DishList dishData={dishData}/>\r\n                )\r\n            }\r\n            \r\n            <Footer />\r\n        </>   \r\n    )\r\n    \r\n}\r\n","import React, { useEffect } from 'react';\r\nimport './Cart_Item.css'\r\nimport { useContext } from 'react'; \r\nimport { CartContext } from '../../../global/CartContext';\r\n\r\nexport default function CartItem({cartData}) {\r\n    const[cartContext,setCartContext] = useContext(CartContext)\r\n\r\n    const Item = ({orderName, orderCount}) =>{\r\n        const addCart = () =>{\r\n            setCartContext(oldValues => {\r\n              const productIndex = oldValues.findIndex(\r\n                val => val.orderName === orderName\r\n              )\r\n              let updatedCartItems = []\r\n              //如果 item 已經在 Cart 裡面的話\r\n              if (productIndex !== -1) {\r\n                updatedCartItems = [\r\n                  //在陣列裡面該 item 前面的物件\r\n                    ...oldValues.slice(0, productIndex),\r\n                  //在陣列裡面同樣的那個 item 數量+1\r\n                    {\r\n                        orderName,\r\n                        count: oldValues[productIndex].count + 1,\r\n                    },\r\n                  //在陣列裡該 item 後面的物件\r\n                    ...oldValues.slice(productIndex + 1),\r\n                  ]\r\n              }\r\n              //把購物車資料放在 localstorage 裡面\r\n              try {\r\n                window.localStorage.setItem(\"cartItems\", JSON.stringify(updatedCartItems))\r\n                console.log(cartContext);\r\n              } catch (e) {\r\n                console.error(\"Error in storing cart items in local storage\")\r\n              }\r\n              return updatedCartItems\r\n            })\r\n        }\r\n\r\n        const subCart = () =>{\r\n            setCartContext(oldValues => {\r\n              const productIndex = oldValues.findIndex(\r\n                val => val.orderName === orderName\r\n              )\r\n              let updatedCartItems = []\r\n              //如果 item 已經在 Cart 裡面的話\r\n              if (productIndex !== -1) {\r\n                updatedCartItems = [\r\n                  //在陣列裡面該 item 前面的物件\r\n                    ...oldValues.slice(0, productIndex),\r\n                  //在陣列裡面同樣的那個 item 數量+1\r\n                    {\r\n                        orderName,\r\n                        count: oldValues[productIndex].count - 1,\r\n                    },\r\n                  //在陣列裡該 item 後面的物件\r\n                    ...oldValues.slice(productIndex + 1),\r\n                  ]\r\n              }\r\n\r\n              //把購物車資料放在 localstorage 裡面\r\n              try {\r\n                window.localStorage.setItem(\"cartItems\", JSON.stringify(updatedCartItems))\r\n              } catch (e) {\r\n                console.error(\"Error in storing cart items in local storage\")\r\n              }\r\n              return updatedCartItems\r\n            })\r\n        }      \r\n        return(\r\n            <div className=\"row g-0 align-items-center mb-3\">\r\n                <div className=\"col-6 col-md-3\">\r\n                    <img src=\"https://picsum.photos/1200/600?random=10\" className=\"rounded-start cart_item_img\" alt=\"...\" />\r\n                </div>\r\n                <div className=\"col-6 col-md-3 item_name\">\r\n                    <h5>{orderName}</h5>\r\n                </div>\r\n                <div className=\"col-6 col-md-3 mt-2 order_col\"> \r\n                    <button type=\"button\" className=\"btn btn-secondary order_item_btn mx-2\" onClick={addCart}><i className=\"fas fa-plus\"></i></button>\r\n                    <span className='mx-2'>{orderCount}</span>\r\n                    <button type=\"button\" className=\"btn btn-secondary order_item_btn mx-2\" onClick={subCart}><i className=\"fas fa-minus\"></i></button> \r\n                </div>\r\n                <div className=\"col-3 col-md-2 cost_item mt-2\">\r\n                    <h5>cost</h5>   \r\n                </div>\r\n                <div className=\"col-3 col-md-1 del_item mt-2\">\r\n                    <a  href=\"/#\"><i className=\"fas fa-trash\"></i></a>    \r\n                </div>  \r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n    <div className=\"container mb-4\">\r\n        <div className=\"row\">\r\n            <div className=\"col-12\">\r\n                {\r\n                    Object.entries(cartContext).map(([key,value])=>{\r\n                        const orderName = value.orderName\r\n                        const orderCount = value.count\r\n                        return(\r\n                            <>\r\n                                <Item orderName={orderName} orderCount={orderCount}/>\r\n                            </>\r\n                        )})\r\n                }\r\n            </div>    \r\n        </div>\r\n        \r\n    </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Navbar from '../../components/Navbar';\r\nimport CartItem from './component/Cart_Item';\r\nimport {Link} from 'react-router-dom';\r\nimport './Cart.css';\r\nimport { useState, useEffect,useContext } from 'react'; \r\nimport { AuthContext } from '../../global/AuthContext';\r\nimport { CartContext } from '../../global/CartContext';\r\nimport { apiCartRecord,apiCreatCart,apiUserDetailsRequest,apiOrderDish } from '../../global/api';\r\nexport default function Cart() {\r\n    const restaurantName = window.localStorage.getItem(\"restaurantName\")\r\n    const [userContext, setUserContext] = useContext(AuthContext)\r\n    const [cartContext,setCartContext] = useContext(CartContext)\r\n    const [userId,setUserId] = useState(\"\")\r\n    const[cartData,setCartData]= useState({})\r\n    \r\n    //取得user ID\r\n    useEffect(()=>{\r\n        apiUserDetailsRequest({\r\n            headers:{\r\n                Authorization: `Bearer ${userContext.token}`}\r\n        })\r\n        .then(async response =>{\r\n            if(response.statusText === 'OK'){\r\n                const data = await response.data\r\n                setUserId(data._id)\r\n            }else{\r\n                if(response.status === 401){\r\n                    window.location.reload()\r\n                }else{\r\n                    setUserContext( prevData =>{\r\n                        return{...prevData, details : null}\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    },[])\r\n\r\n    //把訂單所需的資料包成一個物件\r\n    useEffect(() => {\r\n        setCartData({\r\n            userId:userId,\r\n            history:[{\r\n                    restaurantName:restaurantName,\r\n                    dish:cartContext\r\n                }\r\n            ]\r\n        })\r\n    }, [userId,restaurantName,cartContext])\r\n\r\n    //更新購物車\r\n    useEffect(() => {\r\n        if( userId !== \"\"){\r\n            console.log(cartData);\r\n            apiCreatCart(cartData)\r\n            .then(res=>{\r\n                console.log(res);\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            }) \r\n        }\r\n    }, [cartData])\r\n\r\n    //送出訂單給後端\r\n    const handleOrder = () =>{\r\n        apiOrderDish(cartData)\r\n        .then(res=>{\r\n            console.log(res);\r\n        })\r\n        .catch(err=>{\r\n            console.log(err);\r\n        })\r\n\r\n        setCartData({\r\n            userId:userId,\r\n            history:[{\r\n                    restaurantName:restaurantName,\r\n                    dish:[]\r\n                }\r\n            ]\r\n        })\r\n        localStorage.removeItem('cartItems');\r\n\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <div className=\"container cartkv\">\r\n                <div className=\"row\">\r\n                    <h5>Shopping Cart</h5>\r\n                    <hr />\r\n                    <CartItem cartData={cartData}/>\r\n                </div>\r\n            </div>\r\n            <div className=\"container cartsum mb-4\">\r\n                <hr />\r\n                <div className=\"row mb-2\">\r\n                    <div className=\"col-8 backtoshop\">\r\n                        <Link to=\"/Homepage\" ><i className=\"fas fa-arrow-left\"></i>&nbsp;Back</Link>\r\n                    </div>\r\n                    {/* <div className=\"col-4\">\r\n                        <span className=\"text-end\">Total Price</span>    \r\n                    </div> */}\r\n                </div>\r\n                <div className=\"row justify-content-end \"> \r\n                    <div className=\"col col-md-4 col-sm-8 cartbtn text-end\">\r\n                        <button type=\"button\" className=\"btn btn-outline-dark\"  onClick={handleOrder}>check out</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>    \r\n    )\r\n}","import React ,{useState,useEffect,useContext}from 'react'\r\nimport { apiUserDetailsRequest,apiCreateScore,apiCreateMessage} from '../global/api'\r\nimport { AuthContext } from '../global/AuthContext';\r\nexport default function CommentWindow({hide,editRestaurantId}) {\r\n    const [userContext, setUserContext] = useContext(AuthContext)\r\n    const [userId,setUserId] = useState(\"\")\r\n    const[commentBody,setCommentBody] = useState(\"\")\r\n    const[currentValue, setCurrentValue] = useState(0)\r\n    const[hoverValue, setHoverValue] = useState(undefined)\r\n\r\n    //get user ID\r\n    useEffect(()=>{\r\n        apiUserDetailsRequest({\r\n            headers:{\r\n                Authorization: `Bearer ${userContext.token}`}\r\n        })\r\n        .then(async response =>{\r\n            if(response.statusText === 'OK'){\r\n                const data = await response.data\r\n                setUserId(data._id)\r\n            }else{\r\n                if(response.status === 401){\r\n                    window.location.reload()\r\n                }\r\n            }\r\n        })\r\n    },[])\r\n    \r\n    const color ={\r\n        orange:\"#FFBA5A\",\r\n        gray:\"#a9a9a9\"\r\n    }\r\n\r\n    let modelStyle ={\r\n        display:'block',\r\n        backgroundColor:'rgba(156, 156, 156,0.7)'\r\n    }\r\n    \r\n    const closemodel = () =>{\r\n        hide(false)\r\n    }\r\n\r\n    useEffect(() => {    \r\n        window.AOS.init({\r\n          duration : 500\r\n        });\r\n    }, []);\r\n\r\n    //count star\r\n    const handleClick = value =>{\r\n        setCurrentValue(value)\r\n    }\r\n\r\n    const handleMouseOver = value =>{\r\n        setHoverValue(value)\r\n    }\r\n\r\n    const handleMouseLeave = () =>{\r\n        setHoverValue(undefined)\r\n    }\r\n\r\n    //request CreateScore & CreateMessage\r\n    const handleSubmit= () =>{\r\n        const userCommentData = {\r\n            restaurantId:\"61f1796332fc13ee449e47bc\", \r\n            userId:userId, \r\n            content:commentBody\r\n        }\r\n        const userScoreData = {\r\n            restaurantId:\"61f1796332fc13ee449e47bc\", \r\n            userId:userId, \r\n            score:currentValue\r\n        }\r\n        apiCreateScore(userScoreData)\r\n        .then(response =>{\r\n            console.log(response);\r\n        }).catch(err =>{\r\n            console.log(err);\r\n        })\r\n\r\n        apiCreateMessage(userCommentData)\r\n        .then(response =>{\r\n            console.log(response);\r\n        }).catch(err =>{\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    const StarRate = () =>{\r\n        const stars = Array(5).fill(0)\r\n        return(\r\n            stars.map((_, index)=>{\r\n                return(\r\n                    <i \r\n                        className=\"fas fa-star\"\r\n                        key={index} \r\n                        style={{\r\n                            cursor:\"pointer\",\r\n                            color : (hoverValue || currentValue) > index ? color.orange : color.gray\r\n                        }}\r\n                        onClick={() => handleClick(index + 1)}\r\n                        onMouseOver={() => handleMouseOver(index + 1)}\r\n                        onMouseLeave = {handleMouseLeave}\r\n                    ></i>\r\n                    \r\n                );\r\n            })\r\n        );\r\n    }\r\n\r\n    const CommentArea = () =>{\r\n        return(\r\n            <>\r\n            <h5 className='text-start'>Leave a Comment :</h5>\r\n            <div className='row justify-content-center mb-2 mt-2'>\r\n                <div className='col-12 col-md-10'>\r\n                    <input \r\n                        className='w-100'\r\n                        onChange={(e) => setCommentBody(e.target.value)}\r\n                        value={commentBody}\r\n                    />\r\n                    <div className='col-6 text-start'>\r\n                        <StarRate />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n                <div className='row justify-content-end'>\r\n                    <div className='col-4 col-lg-2'>\r\n                        <button type=\"submit\" className=\"btn btn-outline-secondary\" onClick={handleSubmit}>Comment</button>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal\" style={modelStyle} data-aos=\"fade-down\" data-aos-offset=\"250\">\r\n            <div className=\"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable justify-content-center\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header \">\r\n                        <h5 className=\"modal-title\"><i className=\"far fa-edit\"></i></h5>\r\n                        <button type=\"button\" className=\"btn-close\" onClick={closemodel}/>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <CommentArea />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { useState } from 'react';\r\nimport CommentWindow from '../../../components/CommentWindow';\r\n\r\nexport default function RecordItem({dish,restaurantName}) {\r\n    const [modalshow,setmodalshow] = useState(false)\r\n    \r\n    const handleCommet = () =>{\r\n        setmodalshow(true)\r\n      }\r\n\r\n    return (\r\n    <div className=\"row mb-4\">\r\n        <h5>{restaurantName}</h5>\r\n\r\n        {\r\n            Object.entries(dish[0]).map(([key,value],index)=>{\r\n                return(\r\n                    <div key={index}>\r\n                        <div className=\"col-12\">\r\n                            <div className=\"row g-0 align-items-center\">\r\n                                <div className=\"col-3 me-4\">\r\n                                    <img src=\"https://picsum.photos/1200/600?random=10\" className=\"rounded-start cart_item_img \" alt=\"...\" />\r\n                                </div>\r\n                                <div className=\"col-4 text-center\">   \r\n                                    <h5>{value.orderName}</h5>\r\n                                </div>\r\n                                <div className=\"col-2 cost_item text-center\">\r\n                                    <h5>Count&nbsp;:&nbsp;{value.count}</h5>   \r\n                                </div>\r\n                                <div className=\"col cost_item text-center\">\r\n                                    <div>\r\n                                         \r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div> \r\n                        <hr className=\"mt-4\"/>\r\n                    </div>\r\n                )\r\n            })\r\n        }    \r\n        <div className='row justify-content-end'>\r\n            <div className='col text-end'>\r\n                <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={handleCommet}>評價</button>&nbsp;\r\n                {modalshow && <CommentWindow hide={setmodalshow}/>}\r\n            </div>\r\n            \r\n        </div>  \r\n    </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Navbar from '../../components/Navbar'\r\nimport RecordItem from './component/Record_Item';\r\nimport { AuthContext } from '../../global/AuthContext';\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport { apiUserRecord, apiUserDetailsRequest } from '../../global/api';\r\nexport default function Record() {\r\n    const [userContext, setUserContext] = useContext(AuthContext)\r\n    const[recordData,setrecordData] = useState([])\r\n    const [userId,setUserId] = useState(\"\")\r\n\r\n    //get user ID\r\n    useEffect(()=>{\r\n        apiUserDetailsRequest({\r\n            headers:{\r\n                Authorization: `Bearer ${userContext.token}`}\r\n        })\r\n        .then(async response =>{\r\n            if(response.statusText === 'OK'){\r\n                const data = await response.data\r\n                setUserId(data._id)\r\n            }else{\r\n                if(response.status === 401){\r\n                    window.location.reload()\r\n                }else{\r\n                    setUserContext( prevData =>{\r\n                        return{...prevData, details : null}\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    },[])\r\n\r\n    //get user record\r\n    useEffect(()=>{\r\n        if(userId !== \"\"){\r\n        apiUserRecord(userId)\r\n        .then(res=>{\r\n            setrecordData(res.data.history[0]);\r\n        })\r\n        .catch(err=>{\r\n            console.log(err);\r\n        })\r\n        }else{\r\n           return\r\n        }\r\n    },[userId])\r\n    return (\r\n        <>\r\n            <Navbar />\r\n             <div className=\"container cartkv\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-3 col-lg-1 backtoshop\">\r\n                        <Link to=\"/Homepage\" style={{textDecoration:null,color:'black'}}><i className=\"fas fa-arrow-left\"></i>&nbsp;Back</Link>\r\n                    </div>\r\n                        <div className=\"col\">\r\n                            <h5 style={{textAlign:'center'}}>Shopping Record</h5>\r\n                        </div>\r\n                    <hr />\r\n                   \r\n                        {\r\n                            recordData.map(item=>{\r\n                                const{dish,restaurantName} = item\r\n                                return(\r\n                                    <RecordItem \r\n                                    dish={dish}\r\n                                    restaurantName={restaurantName}\r\n                                    />\r\n                                )\r\n                            })\r\n                        }\r\n                    \r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Navbar from '../../components/Navbar'\r\nimport Edit from './component/Edit'\r\n\r\nexport default function Editpage() {\r\n    return (\r\n        <>\r\n        <Navbar />\r\n        <Edit name={\"Add\"} title={\"新增資訊\"}/>\r\n        </>\r\n        \r\n    )\r\n}\r\n","import React from 'react';\nimport SignIn from './pages/SignInUp/SignIn';\nimport SignUp from './pages/SignInUp/SignUp';\nimport Homepage from './pages/Home/Homepage';\nimport Cart from './pages/Cart/Cart'\nimport Record from './pages/Record/Record'\nimport Editpage from './pages/EditMenu/Editpage';\nimport Loader from './components/Loader';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom';\nimport {useEffect, useContext, useCallback } from 'react';\nimport { AuthContext } from './global/AuthContext';\nimport { apiUserRefreshToken} from './global/api';\n\nfunction App() {\n  const[userContext, setUserContext] = useContext(AuthContext);\n    //useCallback 避免 Component re-render 時重新宣告，\n    //verifyUser() 放在 useEffect  的依賴值裡，function 在 JS 裡視為物件，物件或是陣列等\n    //是看記憶體位址，基本上都會視為不相同，因此會一直重新宣告verifyUser()\n    const verifyUser = useCallback(()=>{\n      //RefreshToken API\n      apiUserRefreshToken()\n      .then( async res =>{\n        if(res.statusText === 'OK'){\n          const data = await res.data\n          setUserContext( prevData =>{\n            return{...prevData, token : data.token} \n          })\n        }\n        setTimeout(verifyUser, 5 * 60 * 1000)\n      })\n      .catch(err=>{\n        console.log(err);\n          setUserContext( prevData => {\n            return{...prevData, token : null}\n          })\n      })\n  },[setUserContext])\n\n  useEffect(()=>{\n    verifyUser()\n  },[verifyUser])\n\n  //登出\n  const synclogout = useCallback(event=>{\n    if(event.key === \"logout\"){\n      window.location.reload()\n    }\n  },[])\n\n  useEffect(() => {\n    window.addEventListener(\"storage\", synclogout)\n    return () => {\n      window.removeEventListener(\"storage\", synclogout)\n    }\n  },[synclogout])\n\n  return (    \n    <Router>\n      <Switch>\n        <ProtectedLogin exact path=\"/\" auth={userContext} component={SignIn} />\n        <ProtectedLogin path=\"/SignUp\" auth={userContext} component={SignUp} />\n        <ProtectedRoute path=\"/Homepage\" auth={userContext} component={Homepage} />\n        <ProtectedRoute path=\"/Cart\" auth={userContext} component={Cart} />\n        <ProtectedRoute path=\"/Record\" auth={userContext} component={Record} />\n        <ProtectedRoute path=\"/Edit\" auth={userContext} component={Editpage} />\n      </Switch>\n    </Router>\n  );\n}\n\n//protect Login\nconst ProtectedLogin = ({auth,component:Component, ...rest}) =>{\n  return(\n    <Route \n    {...rest} \n      render ={()=> auth.token === null ? (\n        <Component />\n        ):auth.token?\n        (\n          <Redirect to =\"/Homepage\" />\n        ):(\n          <Loader />\n        )\n      }\n    />\n  );\n};\n\n//protect route\nconst ProtectedRoute = ({auth,component:Component, ...rest}) =>{\n  return(\n    <Route \n    {...rest} \n      render ={()=> auth.token? (\n        <Component />\n        ): auth.token === null ?\n        (\n          <Redirect to =\"/SignIn\" />\n        ):(\n          <Loader />\n        )\n      }\n    />\n  );\n};\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {AuthProvider} from './global/AuthContext'\nimport {CartProvider} from './global/CartContext'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthProvider>\n      <CartProvider>\n        <App />\n      </CartProvider> \n    </AuthProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}