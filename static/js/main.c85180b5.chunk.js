(this.webpackJsonpwubereat=this.webpackJsonpwubereat||[]).push([[0],{24:function(e,t,c){},41:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(33),r=c.n(s),o=(c(41),c(23)),i=c(4),l=c.n(i),j=c(3),d=c(5),u=c(2),b=c(11),m=(c(24),c(12)),O=c(0),h=n.a.createContext([{},function(){}]),f=function(e){var t=Object(a.useState)({}),c=Object(u.a)(t,2),n=c[0],s=c[1];return Object(O.jsx)(h.Provider,{value:[n,s],children:e.children})},x=c(19),p=c.n(x);p.a.defaults.withCredentials=!0;var v=p.a.create({baseURL:"http://140.115.126.95:80/users",headers:{"Content-Type":"application/json"}}),N=p.a.create({baseURL:"http://140.115.126.95:80/dashboard",headers:{"Content-Type":"application/json"}});v.interceptors.request.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)})),N.interceptors.response.use((function(e){return e}),(function(e){if(e.response)switch(e.response.status){case 404:console.log("\u4f60\u8981\u627e\u7684\u9801\u9762\u4e0d\u5b58\u5728");break;case 500:console.log("\u7a0b\u5f0f\u767c\u751f\u554f\u984c");break;default:console.log(e.response)}if(window.navigator.onLine)return Promise.reject(e);alert("\u7db2\u8def\u51fa\u4e86\u9ede\u554f\u984c\uff0c\u8acb\u91cd\u65b0\u9023\u7dda\u5f8c\u91cd\u6574\u7db2\u9801")}));var g=function(e){return v.get("/me",e)};function w(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!1),r=Object(u.a)(s,2),o=r[0],i=r[1],f=Object(a.useContext)(h),x=Object(u.a)(f,2),p=(x[0],x[1]),N=function(e){var t=e.target,c=t.name,a=t.value;n((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},c,a))}))};return Object(O.jsx)("div",{className:"banner",children:Object(O.jsx)("div",{className:"container SignIncontext",children:Object(O.jsx)("div",{className:"row justify-content-md-end justify-content-sm-center",children:Object(O.jsx)("div",{className:"col col-md-4 col-sm-12",children:Object(O.jsxs)("form",{className:"form",onSubmit:function(e){var t;e.preventDefault(),i(!0),(t=c,v.post("/login2",t)).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data;case 2:c=e.sent,p((function(e){return Object(j.a)(Object(j.a)({},e),{},{token:c.token})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i(!1),console.log(e)}))},children:[Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("span",{className:"leftText col col-lg-7",children:"Sign In"}),Object(O.jsx)("span",{className:"rightText col col-lg-5 text-end",children:Object(O.jsx)(m.b,{to:"/SignUp",children:"+Sign Up"})})]}),Object(O.jsx)("hr",{className:"hr"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"username",className:"form-label",children:"Username"}),Object(O.jsx)("input",{type:"email",name:"username",id:"username",className:"form-control",placeholder:"Account",onChange:N,required:!0})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(O.jsx)("input",{type:"password",name:"password",id:"password",className:"form-control",placeholder:"Password",onChange:N,required:!0})]}),!o&&Object(O.jsx)("button",{type:"submit",className:"btn btn-dark button",children:"Submit"}),o&&Object(O.jsx)("button",{type:"submit",className:"btn btn-dark button",disabled:!0,children:"Submitting..."})]})})})})})}function y(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!1),r=Object(u.a)(s,2),o=r[0],i=r[1],f=Object(a.useContext)(h),x=Object(u.a)(f,2),p=(x[0],x[1]),N=function(e){var t=e.target,c=t.name,a=t.value;n((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},c,a))}))};return Object(O.jsx)("div",{className:"banner",children:Object(O.jsx)("div",{className:"container SignIncontext",children:Object(O.jsx)("div",{className:"row justify-content-md-end justify-content-sm-center",children:Object(O.jsx)("div",{className:"col col-md-4 col-sm-12",children:Object(O.jsxs)("form",{className:"form",onSubmit:function(e){var t;e.preventDefault(),i(!0),(t=c,v.post("/signup",t)).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data;case 2:c=e.sent,p((function(e){return Object(j.a)(Object(j.a)({},e),{},{token:c.token})})),i(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i(!1),console.log(e)}))},children:[Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("span",{className:"leftText col col-lg-7",children:"Sign Up"}),Object(O.jsx)("span",{className:"rightText col col-lg-5 text-end",children:Object(O.jsx)(m.b,{to:"/",children:"+Sign In"})})]}),Object(O.jsx)("hr",{className:"hr"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"username",className:"form-label",children:"Account"}),Object(O.jsx)("input",{type:"email",name:"username",id:"username",className:"form-control",placeholder:"Account",onChange:N,required:!0})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(O.jsx)("input",{type:"password",name:"password",id:"password",className:"form-control",placeholder:"password",onChange:N,required:!0})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"FirstName"}),Object(O.jsx)("input",{type:"text",name:"firstName",id:"firstName",className:"form-control",placeholder:"fristname",onChange:N,required:!0})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"LastName"}),Object(O.jsx)("input",{type:"text",name:"lastName",id:"lastName",className:"form-control",placeholder:"lastname",onChange:N})]}),!o&&Object(O.jsx)("button",{type:"submit",className:"btn btn-dark button",children:"Submit"}),o&&Object(O.jsx)("button",{type:"submit",className:"btn btn-dark button",disabled:!0,children:"Submitting..."})]})})})})})}c(70);var k=n.a.createContext([{},function(){}]),S=[];try{var C=window.localStorage.getItem("cartItems");S=C?JSON.parse(C):[]}catch(ee){console.log(ee)}var I=function(e){var t=Object(a.useState)(S),c=Object(u.a)(t,2),n=c[0],s=c[1];return Object(O.jsx)(k.Provider,{value:[n,s],children:e.children})};function E(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useContext)(h),r=Object(u.a)(s,2),o=r[0],i=r[1],b=Object(a.useState)(0),m=Object(u.a)(b,2),f=m[0],x=m[1],p=Object(a.useContext)(k),N=Object(u.a)(p,1)[0];Object(a.useEffect)((function(){x(N.reduce((function(e,t){return e+t.count}),0))}),[N]);return Object(a.useEffect)((function(){var e=0,t=function(){var t=window.pageYOffset||document.documentElement.scrollTop;n(t>e?-216:0),e=t};return window.addEventListener("scroll",t,{passive:!0}),function(){return window.removeEventListener("scroll",t)}}),[]),Object(O.jsx)("nav",{style:{top:c},className:"navbar navbar-expand-lg navbar-dark",children:Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsx)("span",{className:"navbar-brand",children:"WuberEat"}),Object(O.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav",children:Object(O.jsx)("a",{href:"/#",className:"navbar-toggler-icon",children:" "})}),Object(O.jsx)("div",{className:"collapse navbar-collapse ",id:"navbarNav",children:Object(O.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)("a",{className:"nav-link active","aria-current":"page",href:"/Homepage",children:"Home"})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)("a",{className:"nav-link",href:"/Edit",children:Object(O.jsx)("i",{className:"far fa-cloud-upload"})})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)("a",{className:"nav-link",href:"/Record",children:Object(O.jsx)("i",{className:"far fa-file-alt"})})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)("a",{className:"nav-link",href:"/Cart",children:[Object(O.jsx)("i",{className:"far fa-shopping-cart"}),f>0&&Object(O.jsx)("span",{className:"cart_count",children:f})]})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)("span",{className:"nav-link",onClick:function(){var e;(e={headers:{Authorization:"Bearer ".concat(o.token)}},v.get("/logout2",e)).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),i((function(e){return Object(j.a)(Object(j.a)({},e),{},{datails:void 0,token:null})})),window.localStorage.setItem("logout",Date.now()),window.localStorage.removeItem("cartItems");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})})]})})]})})}c(71);function F(e){var t=e.setSearchValue,c=e.setSearching;return Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"container kv",children:Object(O.jsx)("div",{className:"row justify-content-center align-items-center",children:Object(O.jsxs)("div",{className:"col-lg-6 col-sm-10",children:[Object(O.jsx)("h1",{children:"\u4eca\u665a\u6211\u60f3\u4f86\u9ede..."}),Object(O.jsxs)("div",{className:"search",children:[Object(O.jsx)("input",{type:"text",name:"search",className:"form-control",placeholder:"Search...",onChange:function(e){var c=e.target,a=c.name,n=c.value;t((function(){return Object(b.a)({},a,n)}))}}),Object(O.jsx)("button",{className:"btn btn-outline-dark",onClick:function(){c(!0)},children:Object(O.jsx)("i",{className:"fas fa-search"})})]})]})})})})}c(72);var _=c(10),T=c(36);function L(e){var t=e.name,c=e.title,n=e.editRestaurantId,s=Object(a.useState)({type:[],dish:[],serviceHour:[]}),r=Object(u.a)(s,2),o=r[0],i=r[1],m=Object(a.useState)(null),f=Object(u.a)(m,2),x=f[0],p=f[1],v=Object(a.useState)(""),w=Object(u.a)(v,2),y=w[0],k=w[1],S=Object(a.useState)("Mon"),C=Object(u.a)(S,2),I=C[0],E=C[1],F=Object(a.useState)(""),L=Object(u.a)(F,2),R=L[0],A=L[1],D=Object(a.useState)(""),H=Object(u.a)(D,2),P=H[0],B=H[1],M=Object(a.useState)(""),U=Object(u.a)(M,2),J=U[0],q=U[1],z=Object(a.useState)(""),K=Object(u.a)(z,2),G=K[0],V=K[1],$=Object(a.useContext)(h),W=Object(u.a)($,2),Y=W[0],Q=W[1],X=Object(T.useHistory)(),Z=Object(a.useCallback)((function(){g({headers:{Authorization:"Bearer ".concat(Y.token)}}).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("OK"!==t.statusText){e.next=7;break}return e.next=3,t.data;case 3:c=e.sent,Q((function(e){return Object(j.a)(Object(j.a)({},e),{},{details:c})})),e.next=8;break;case 7:401===t.status?window.location.reload():Q((function(e){return Object(j.a)(Object(j.a)({},e),{},{details:null})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[Q,Y.token]);Object(a.useEffect)((function(){Y.details||Z()}),[Y.details,Z]);var ee=function(e){var t=e.target,c=t.name,a=t.value;i((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},c,a))}))},te=function(e){V(e.target.result)};return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"container",style:{marginTop:80},children:[Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("h5",{children:c})}),Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsxs)("form",{className:"form col-md-8 col-12",onSubmit:function(e){e.preventDefault();var c,a,s=new FormData;for(var r in o)if("type"===r)for(var i=0;i<o[r].length;i++)s.append("".concat(r,"[").concat(i,"]"),o[r][i]);else if("serviceHour"===r||"dish"===r)for(var l=0;l<o[r].length;l++)s.append("".concat(r,"[").concat(l,"]"),JSON.stringify(o[r][l]));else s.append(r,o[r]);s.append("menu",x),s.append("userId",Y.details._id),"Edit"===t?(c=n,a=s,N.put("/restaurant/".concat(c),a)).then((function(e){console.log(e)})).catch((function(e){console.log(e)})):function(e){return N.post("/createMenu",e)}(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),X.push("/Homepage")},children:[Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{className:"form-label",children:"\u9910\u5ef3\u540d\u7a31"}),Object(O.jsx)("input",{type:"text",name:"restaurantName",className:"form-control",placeholder:"...",required:!0,onChange:ee})]}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{htmlFor:"menuFile",className:"form-label",children:"\u9910\u5ef3\u83dc\u55ae"}),Object(O.jsx)("input",{className:"form-control",name:"menu",type:"file",id:"menuFile",required:!0,onChange:function(e){var t=e.target.files[0];p(t);var c=new FileReader;c.addEventListener("load",te),c.readAsDataURL(t)}}),Object(O.jsx)("div",{className:"mx-3 my-3",style:{textAlign:"center"},children:Object(O.jsx)("img",{src:G,alt:x,width:"100%"})})]}),Object(O.jsx)("label",{className:"form-label mb-2",children:"\u9910\u5ef3\u6a19\u7c64"}),Object(O.jsxs)("div",{className:"input-group mb-3",children:[Object(O.jsx)("input",{type:"text",name:"type",className:"form-control",placeholder:"...",onChange:function(e){k(e.target.value)}}),Object(O.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){i((function(e){return Object(j.a)(Object(j.a)({},e),{},{type:[].concat(Object(_.a)(o.type),[y])})}))},children:Object(O.jsx)("i",{className:"fas fa-plus"})})]}),Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"col mb-3",children:o.type.map((function(e){return Object(O.jsxs)("span",{style:{color:"rgb(80, 67, 161)"},children:["\xa0#\xa0",e]})}))})}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{className:"form-label",children:"\u9910\u5ef3\u96fb\u8a71"}),Object(O.jsx)("input",{type:"text",name:"restaurantPhone",className:"form-control",placeholder:"...",onChange:ee})]}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{className:"form-label",children:"\u9910\u5ef3\u5730\u5740"}),Object(O.jsx)("input",{type:"text",name:"restaurantLocation",className:"form-control",placeholder:"...",onChange:ee})]}),Object(O.jsx)("label",{className:"form-label",children:"\u9910\u5ef3\u71df\u696d\u6642\u9593"}),Object(O.jsxs)("div",{className:"input-group mb-3",children:[Object(O.jsx)("span",{className:"input-group-text",id:"inputGroupSelect",children:"\u65e5\u671f"}),Object(O.jsxs)("select",{className:"form-select",id:"inputGroupSelect01",onChange:function(e){E(e.target.value)},children:[Object(O.jsx)("option",{value:"Mon",children:"\u661f\u671f\u4e00"}),Object(O.jsx)("option",{value:"Tue",children:"\u661f\u671f\u4e8c"}),Object(O.jsx)("option",{value:"Wed",children:"\u661f\u671f\u4e09"}),Object(O.jsx)("option",{value:"Thu",children:"\u661f\u671f\u56db"}),Object(O.jsx)("option",{value:"Fri",children:"\u661f\u671f\u4e94"}),Object(O.jsx)("option",{value:"Sat",children:"\u661f\u671f\u516d"}),Object(O.jsx)("option",{value:"Sun",children:"\u661f\u671f\u65e5"})]}),Object(O.jsx)("span",{className:"input-group-text",children:"\u6642\u9593"}),Object(O.jsx)("input",{type:"text",name:"serviceHour",className:"form-control",placeholder:"...",onChange:function(e){A(e.target.value)}}),Object(O.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){i((function(e){return Object(j.a)(Object(j.a)({},e),{},{serviceHour:[].concat(Object(_.a)(o.serviceHour),[Object(b.a)({},I,R)])})}))},children:Object(O.jsx)("i",{className:"fas fa-plus"})})]}),Object.entries(o.serviceHour).map((function(e){var t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("span",{className:"mt-1",children:Object.keys(a)},c)}),Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("span",{className:"mt-1",children:":"},c)}),Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("span",{className:"mt-1",children:Object.values(a)},c)})]},c)})),Object(O.jsxs)("div",{className:"mt-3 mb-3",children:[Object(O.jsx)("label",{className:"form-label",children:"\u9910\u5ef3\u9910\u9ede"}),Object(O.jsxs)("div",{className:"input-group",children:[Object(O.jsx)("span",{className:"input-group-text",id:"inputGroupSelect",children:"\u9910\u9ede"}),Object(O.jsx)("input",{type:"text",name:"dishName",className:"form-control",placeholder:"...",onChange:function(e){B(e.target.value)}}),Object(O.jsx)("span",{className:"input-group-text",children:"\u50f9\u9322"}),Object(O.jsx)("input",{type:"text",name:"price",className:"form-control",placeholder:"...",onChange:function(e){q(e.target.value)}}),Object(O.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){i((function(e){return Object(j.a)(Object(j.a)({},e),{},{dish:[].concat(Object(_.a)(o.dish),[Object(b.a)({},P,J)])})}))},children:Object(O.jsx)("i",{className:"fas fa-plus"})})]})]}),Object.entries(o.dish).map((function(e){var t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("span",{className:"mt-1",children:Object.keys(a)},c)}),Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("span",{className:"mt-1",children:":"},c)}),Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("span",{className:"mt-1",children:Object.values(a)},c)})]},c)})),Object(O.jsx)("button",{type:"submit",className:"btn btn-outline-warning w-100 mt-4",children:t})]})})]})})}function R(e){var t=e.hide,c=e.editRestaurantId;return Object(a.useEffect)((function(){window.AOS.init({duration:500})}),[]),Object(O.jsx)("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(156, 156, 156,0.7)"},"data-aos":"fade-down","data-aos-offset":"250",children:Object(O.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable justify-content-center",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header ",children:[Object(O.jsx)("h5",{className:"modal-title",children:Object(O.jsx)("i",{className:"far fa-edit"})}),Object(O.jsx)("button",{type:"button",className:"btn-close",onClick:function(){t(!1)}})]}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsx)(L,{name:"Edit",title:"\u7de8\u8f2f\u8cc7\u8a0a",editRestaurantId:c})})]})})})}function A(e){var t=e.cardImgSrc,c=e.cardTitle,n=e.cardContent,s=e.id,r=e.setRestaurantId,o=Object(a.useState)(!1),i=Object(u.a)(o,2),l=i[0],j=i[1],d=Object(a.useState)(null),b=Object(u.a)(d,2),m=b[0],h=b[1];return Object(a.useEffect)((function(){window.AOS.init({duration:1e3})}),[]),Object(O.jsxs)("div",{className:"col-6 col-md-3 pb-3",children:[Object(O.jsxs)("div",{className:"card card-custom bg-white border-white border-0","data-aos":"fade-down","data-aos-offset":"250",children:[Object(O.jsx)("img",{src:"http://localhost:80/".concat(t),className:"card-custom-img",alt:"..."}),Object(O.jsx)("div",{className:"card-custom-edit",onClick:function(){j(!0),h(s)},children:Object(O.jsx)("i",{className:"far fa-edit"})}),Object(O.jsxs)("div",{className:"card-body",style:{overflowY:"auto"},children:[Object(O.jsx)("h5",{className:"card-title",children:c}),Object(O.jsx)("div",{className:"card-text",children:Object(O.jsx)("div",{className:"row",children:n.map((function(e){return Object(O.jsx)("div",{className:"col-12",role:"alert",children:Object(O.jsxs)("h5",{style:{color:"rgb(80, 67, 161)"},children:["#",e]})})}))})})]}),Object(O.jsxs)("div",{className:"card-footer px-1",style:{background:"inherit",borderColor:"inherit"},children:[Object(O.jsx)("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:function(){r(s)},children:"More..."}),Object(O.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){},children:Object(O.jsx)("i",{className:"fas fa-trash-alt"})})]})]}),l&&Object(O.jsx)(R,{hide:j,editRestaurantId:m})]})}c(73);function D(e){var t=e.searchValue,c=e.searching,n=e.setSearching,s=e.setDishShow,r=e.setDishData,o=Object(a.useState)([]),i=Object(u.a)(o,2),j=i[0],b=i[1],m=Object(a.useState)({key:null}),h=Object(u.a)(m,2),f=h[0],x=h[1],p=Object(a.useState)(""),v=Object(u.a)(p,2),g=v[0],w=v[1],y=Object(a.useState)(!1),k=Object(u.a)(y,2),S=k[0],C=k[1];Object(a.useEffect)((function(){N.get("/restaurants").then((function(e){b(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){var e;!0===c&&((e={params:t},N.get("/search",e)).then((function(e){console.log(e),b(e.data)})).catch((function(e){console.log(e)})),n(!1))}),[c]),Object(a.useEffect)((function(){function e(){return new Promise((function(e,t){var c=j.filter((function(e){return e._id===g}));e(),r(c)}))}function t(){return(t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:""!==g&&s(!0);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[g]);var I=function(e){C(e);var t="ascending";f.key===e&&"ascending"===f.direction&&(t="descending",C(null)),x({key:e,direction:t})};return Object(a.useMemo)((function(){null!==f&&j.sort((function(e,t){return e[f.key]<t[f.key]?"ascending"===f.direction?-1:1:e[f.key]>t[f.key]?"ascending"===f.direction?1:-1:0}))}),[j,f]),Object(O.jsxs)("div",{className:"container cardcontainer mt-4",style:{marginBottom:80},children:[Object(O.jsx)("div",{className:"container mb-3",children:Object(O.jsxs)("div",{className:"row justify-content-start",children:[Object(O.jsx)("div",{className:"col col-md-3 sort-option",children:Object(O.jsxs)("button",{type:"button",className:"sort-text",onClick:function(){return I("popular")},children:["Popular","popular"!==S&&Object(O.jsx)("i",{className:"fas fa-sort-up sort-icon"}),"popular"===S&&Object(O.jsx)("i",{className:"fas fa-sort-down sort-icon2"})]})}),Object(O.jsx)("div",{className:"col col-md-3 sort-option",children:Object(O.jsxs)("button",{type:"button",className:"sort-text",onClick:function(){return I("createdAt")},children:["Date","createdAt"!==S&&Object(O.jsx)("i",{className:"fas fa-sort-up sort-icon"}),"createdAt"===S&&Object(O.jsx)("i",{className:"fas fa-sort-down sort-icon2"})]})}),Object(O.jsx)("div",{className:"col col-md-3 sort-option",children:Object(O.jsxs)("button",{type:"button",className:"sort-text",onClick:function(){return I("restaurantName")},children:["Name","restaurantName"!==S&&Object(O.jsx)("i",{className:"fas fa-sort-up sort-icon"}),"restaurantName"===S&&Object(O.jsx)("i",{className:"fas fa-sort-down sort-icon2"})]})})]})}),Object(O.jsx)("div",{className:"row",children:j.map((function(e,t){var c=e.menu,a=e.restaurantName,n=e.type,s=e._id;return Object(O.jsx)(A,{setDishData:r,setRestaurantId:w,cardImgSrc:c,cardTitle:a,cardContent:n,id:s},s)}))})]})}function H(e){var t=e.dishData,c=Object(a.useState)({lat:24.968281,lng:121.192889}),n=Object(u.a)(c,2),s=n[0],r=n[1],o=(s.lat,s.lng,window.google),i=window.L,j=Object(a.useRef)(null),b=Object(a.useRef)(null),m=Object(a.useRef)(null),h=Object(a.useContext)(k),f=Object(u.a)(h,2),x=(f[0],f[1]),p=t[0]._id,v=Object(a.useState)(0),g=Object(u.a)(v,2),w=g[0],y=g[1],S=Object(a.useState)([]),C=Object(u.a)(S,2),I=C[0],E=C[1];Object(a.useEffect)((function(){j.current=i.map("map").setView([24.968281,121.192889],15);i.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>'}).addTo(j.current)}),[]),Object(a.useEffect)((function(){var e=new o.maps.Geocoder,c="".concat(t[0].restaurantLocation);e.geocode({address:c},(function(e,t){t===o.maps.GeocoderStatus.OK&&r({lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()})}))}),[]),Object(a.useEffect)((function(){b.current?(b.current.setLatLng(s),m.current.setLatLng(s)):(b.current=i.marker(s).addTo(j.current),b.current.bindPopup("<b>".concat(t[0].restaurantName,"</b><br>").concat(t[0].restaurantLocation)).openPopup(),m.current=i.circle(s,{color:"red",fillColor:"#f03",fillOpacity:.5,radius:10,weight:1}).addTo(j.current)),j.current.flyTo(s,15,{duration:2})}),[s]),Object(a.useEffect)((function(){var e;(e=p,N.get("/score/".concat(e))).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,t.data;case 3:c=e.sent,F(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})),function(e){return N.get("/message/".concat(e))}(p).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,t.data;case 3:c=e.sent,E(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}),[]);var F=function(e){for(var t=0,c=0,a=e.length,n=null,s=0;s<a;s++)null!==(n=e[s])&&(t=n.score+t,c+=1);y(t/c),console.log(I)},T=function(e){var t=e.key,c=e.restaurantName,a=e.restaurantId,n=e.dishName,s=e.price;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"row g-0 justify-content-center align-items-center mb-3",children:[Object(O.jsx)("div",{className:"col-3 me-4",children:Object(O.jsx)("img",{src:"https://picsum.photos/1200/600?random=10",className:"rounded-start cart_item_img ",alt:"..."})}),Object(O.jsx)("div",{className:"col-3 cost_item",children:Object(O.jsx)("h5",{children:n})}),Object(O.jsx)("div",{className:"col-2 cost_item",children:Object(O.jsxs)("h5",{children:["$",s]})}),Object(O.jsx)("div",{className:"col-3 cost_item",children:Object(O.jsx)("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:function(){var e=n[0];x((function(t){var n=t.findIndex((function(t){return t.orderName===e})),s=[];s=-1!==n?[].concat(Object(_.a)(t.slice(0,n)),[{orderName:e,count:t[n].count+1}],Object(_.a)(t.slice(n+1))):[].concat(Object(_.a)(t),[{orderName:e,count:1}]);try{window.localStorage.setItem("cartItems",JSON.stringify(s)),window.localStorage.setItem("restaurantName",c),window.localStorage.setItem("restaurantId",a)}catch(r){console.error("Error in storing cart items in local storage")}return s}))},children:"addCart"})})]},t),Object(O.jsx)("hr",{className:"mt-4"})]})},L=function(e){var t=e.messageContent,c=e.messageDate;return Object(O.jsx)("div",{className:"col",children:Object(O.jsxs)("div",{class:"alert alert-primary",role:"alert",children:[Object(O.jsx)("h4",{class:"alert-heading",children:"Comment:"}),Object(O.jsx)("p",{children:t}),Object(O.jsx)("hr",{}),Object(O.jsx)("p",{class:"mb-0 text-end",children:c})]})})};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"col mt-4",children:Object(O.jsx)("h5",{style:{textAlign:"center"},children:t[0].restaurantName})}),Object(O.jsx)("hr",{className:"mt-4"}),Object(O.jsx)("div",{className:"container mb-4",children:Object(O.jsxs)("div",{className:"row justify-content-center",children:[Object(O.jsx)("div",{className:"col-12 col-md-8",children:Object(O.jsx)("div",{id:"map",style:{height:"50vh",width:"100%",zIndex:"1",minHeight:350}})}),Object(O.jsxs)("div",{className:"col-12 col-md-4 mt-2",children:[Object(O.jsxs)("div",{className:"row mt-2",children:[Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("i",{className:"far fa-star"})}),Object(O.jsx)("div",{className:"col",children:Object(O.jsx)("h5",{children:w})})]}),Object(O.jsxs)("div",{className:"row mt-2",children:[Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("i",{className:"far fa-phone-alt"})}),Object(O.jsx)("div",{className:"col",children:Object(O.jsx)("h4",{children:t[0].restaurantPhone})})]}),Object(O.jsxs)("div",{className:"row mt-2",children:[Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("i",{className:"far fa-clock"})}),Object(O.jsx)("div",{className:"col",children:Object.entries(t[0].serviceHour).map((function(e){var t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-2",children:Object(O.jsx)("h5",{className:"mt-1",children:Object.keys(a)},c)}),Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("h5",{className:"mt-1",children:":"},c)}),Object(O.jsx)("div",{className:"col-2",children:Object(O.jsx)("h5",{className:"mt-1",children:Object.values(a)},c)})]},c)}))})]})]})]})}),Object(O.jsx)("div",{className:"container mb-4",children:Object(O.jsx)("div",{className:"row",children:Object(O.jsxs)("div",{className:"col-12",children:[Object(O.jsxs)("h4",{className:"mb-2",children:[Object(O.jsx)("i",{className:"fas fa-utensils"}),"\xa0\u9910\u9ede"]}),Object.entries(t[0].dish).map((function(e){var c=Object(u.a)(e,2),a=c[0],n=c[1],s=t[0].restaurantName,r=Object.keys(n),o=Object.values(n);return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(T,{restaurantName:s,restaurantId:p,dishName:r,price:o},a)})}))]})})}),Object(O.jsx)("div",{className:"container mb-4",children:Object(O.jsx)("div",{className:"row",children:Object.entries(I).map((function(e,t){var c=Object(u.a)(e,2),a=(c[0],c[1]),n=a.content,s=a.date;return Object(O.jsx)(L,{messageContent:n,messageDate:s})}))})})]})}c(74);function P(){return Object(O.jsx)("footer",{className:"container-fluid footerbg navbar-fixed-bottom",children:Object(O.jsx)("div",{className:"row justify-content-center align-items-center",children:Object(O.jsxs)("div",{className:"col-4",children:[Object(O.jsx)("span",{className:"text",children:"WUbeR"}),Object(O.jsx)("span",{className:"sub_text",children:"EaT"})]})})})}function B(){return Object(O.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:Object(O.jsx)("div",{className:"spinner-border text-warning",role:"status",style:{width:70,height:70},children:Object(O.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}function M(){var e=Object(a.useContext)(h),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)({}),r=Object(u.a)(s,2),o=r[0],i=r[1],b=Object(a.useState)(!1),m=Object(u.a)(b,2),f=m[0],x=m[1],p=Object(a.useState)(!1),v=Object(u.a)(p,2),w=v[0],y=v[1],k=Object(a.useState)(null),S=Object(u.a)(k,2),C=S[0],I=S[1],_=Object(a.useState)(""),T=Object(u.a)(_,2),L=T[0],R=T[1],A=Object(a.useCallback)((function(){g({headers:{Authorization:"Bearer ".concat(c.token)}}).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("OK"!==t.statusText){e.next=8;break}return e.next=3,t.data;case 3:c=e.sent,R(c._id),n((function(e){return Object(j.a)(Object(j.a)({},e),{},{details:c})})),e.next=9;break;case 8:401===t.status?window.location.reload():n((function(e){return Object(j.a)(Object(j.a)({},e),{},{details:null})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n,c.token]);return Object(a.useEffect)((function(){c.details||A()}),[c.details,A]),Object(a.useEffect)((function(){var e;""!==L&&(e=L,N.get("/carts/".concat(e))).then((function(e){var t=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)cart\s*\=\s*([^;]*).*$)|^.*$/,"$1")),c=JSON.parse(t);window.localStorage.setItem("cartItems",JSON.stringify(c.history[0].dish[0]))})).catch((function(e){console.log(e)}))}),[L]),null===c.details?"Error Loading":c.details?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(E,{}),Object(O.jsx)(F,{setSearchValue:i,setSearching:x}),w?Object(O.jsx)(H,{dishData:C}):Object(O.jsx)(D,{searchValue:o,searching:f,setSearching:x,setDishShow:y,setDishData:I}),Object(O.jsx)(P,{})]}):Object(O.jsx)(B,{})}c(75);function U(e){e.cartData;var t=Object(a.useContext)(k),c=Object(u.a)(t,2),n=c[0],s=c[1],r=function(e){var t=e.orderName,c=e.orderCount;return Object(O.jsxs)("div",{className:"row g-0 align-items-center mb-3",children:[Object(O.jsx)("div",{className:"col-6 col-md-3",children:Object(O.jsx)("img",{src:"https://picsum.photos/1200/600?random=10",className:"rounded-start cart_item_img",alt:"..."})}),Object(O.jsx)("div",{className:"col-6 col-md-3 item_name",children:Object(O.jsx)("h5",{children:t})}),Object(O.jsxs)("div",{className:"col-6 col-md-3 mt-2 order_col",children:[Object(O.jsx)("button",{type:"button",className:"btn btn-secondary order_item_btn mx-2",onClick:function(){s((function(e){var c=e.findIndex((function(e){return e.orderName===t})),a=[];-1!==c&&(a=[].concat(Object(_.a)(e.slice(0,c)),[{orderName:t,count:e[c].count+1}],Object(_.a)(e.slice(c+1))));try{window.localStorage.setItem("cartItems",JSON.stringify(a)),console.log(n)}catch(s){console.error("Error in storing cart items in local storage")}return a}))},children:Object(O.jsx)("i",{className:"fas fa-plus"})}),Object(O.jsx)("span",{className:"mx-2",children:c}),Object(O.jsx)("button",{type:"button",className:"btn btn-secondary order_item_btn mx-2",onClick:function(){s((function(e){var c=e.findIndex((function(e){return e.orderName===t})),a=[];-1!==c&&(a=[].concat(Object(_.a)(e.slice(0,c)),[{orderName:t,count:e[c].count-1}],Object(_.a)(e.slice(c+1))));try{window.localStorage.setItem("cartItems",JSON.stringify(a))}catch(n){console.error("Error in storing cart items in local storage")}return a}))},children:Object(O.jsx)("i",{className:"fas fa-minus"})})]}),Object(O.jsx)("div",{className:"col-3 col-md-2 cost_item mt-2",children:Object(O.jsx)("h5",{children:"cost"})}),Object(O.jsx)("div",{className:"col-3 col-md-1 del_item mt-2",children:Object(O.jsx)("a",{href:"/#",children:Object(O.jsx)("i",{className:"fas fa-trash"})})})]})};return Object(O.jsx)("div",{className:"container mb-4",children:Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-12",children:Object.entries(n).map((function(e){var t=Object(u.a)(e,2),c=(t[0],t[1]),a=c.orderName,n=c.count;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(r,{orderName:a,orderCount:n})})}))})})})}c(76);function J(){var e=window.localStorage.getItem("restaurantName"),t=Object(a.useContext)(h),c=Object(u.a)(t,2),n=c[0],s=c[1],r=Object(a.useContext)(k),o=Object(u.a)(r,2),i=o[0],b=(o[1],Object(a.useState)("")),f=Object(u.a)(b,2),x=f[0],p=f[1],v=Object(a.useState)({}),w=Object(u.a)(v,2),y=w[0],S=w[1];Object(a.useEffect)((function(){g({headers:{Authorization:"Bearer ".concat(n.token)}}).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("OK"!==t.statusText){e.next=7;break}return e.next=3,t.data;case 3:c=e.sent,p(c._id),e.next=8;break;case 7:401===t.status?window.location.reload():s((function(e){return Object(j.a)(Object(j.a)({},e),{},{details:null})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){S({userId:x,history:[{restaurantName:e,dish:i}]})}),[x,e,i]),Object(a.useEffect)((function(){var e;""!==x&&(console.log(y),(e=y,N.post("/carts",e)).then((function(e){console.log(e)})).catch((function(e){console.log(e)})))}),[y]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(E,{}),Object(O.jsx)("div",{className:"container cartkv",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("h5",{children:"Shopping Cart"}),Object(O.jsx)("hr",{}),Object(O.jsx)(U,{cartData:y})]})}),Object(O.jsxs)("div",{className:"container cartsum mb-4",children:[Object(O.jsx)("hr",{}),Object(O.jsx)("div",{className:"row mb-2",children:Object(O.jsx)("div",{className:"col-8 backtoshop",children:Object(O.jsxs)(m.b,{to:"/Homepage",children:[Object(O.jsx)("i",{className:"fas fa-arrow-left"}),"\xa0Back"]})})}),Object(O.jsx)("div",{className:"row justify-content-end ",children:Object(O.jsx)("div",{className:"col col-md-4 col-sm-8 cartbtn text-end",children:Object(O.jsx)("button",{type:"button",className:"btn btn-outline-dark",onClick:function(){var t;(t=y,N.post("/orderRecord",t)).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),S({userId:x,history:[{restaurantName:e,dish:[]}]}),localStorage.removeItem("cartItems")},children:"check out"})})})]})]})}function q(e){var t=e.hide,c=(e.editRestaurantId,Object(a.useContext)(h)),n=Object(u.a)(c,2),s=n[0],r=(n[1],Object(a.useState)("")),o=Object(u.a)(r,2),i=o[0],j=o[1],b=Object(a.useState)(""),m=Object(u.a)(b,2),f=m[0],x=m[1],p=Object(a.useState)(0),v=Object(u.a)(p,2),w=v[0],y=v[1],k=Object(a.useState)(void 0),S=Object(u.a)(k,2),C=S[0],I=S[1];Object(a.useEffect)((function(){g({headers:{Authorization:"Bearer ".concat(s.token)}}).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("OK"!==t.statusText){e.next=7;break}return e.next=3,t.data;case 3:c=e.sent,j(c._id),e.next=8;break;case 7:401===t.status&&window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var E="#FFBA5A",F="#a9a9a9";Object(a.useEffect)((function(){window.AOS.init({duration:500})}),[]);var _=function(){I(void 0)},T=function(){var e,t={restaurantId:"61f1796332fc13ee449e47bc",userId:i,content:f};(e={restaurantId:"61f1796332fc13ee449e47bc",userId:i,score:w},N.post("/score",e)).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),function(e){return N.post("/message",e)}(t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},L=function(){return Array(5).fill(0).map((function(e,t){return Object(O.jsx)("i",{className:"fas fa-star",style:{cursor:"pointer",color:(C||w)>t?E:F},onClick:function(){y(t+1)},onMouseOver:function(){I(t+1)},onMouseLeave:_},t)}))},R=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h5",{className:"text-start",children:"Leave a Comment :"}),Object(O.jsx)("div",{className:"row justify-content-center mb-2 mt-2",children:Object(O.jsxs)("div",{className:"col-12 col-md-10",children:[Object(O.jsx)("input",{className:"w-100",onChange:function(e){return x(e.target.value)},value:f}),Object(O.jsx)("div",{className:"col-6 text-start",children:Object(O.jsx)(L,{})})]})}),Object(O.jsx)("div",{className:"row justify-content-end",children:Object(O.jsx)("div",{className:"col-4 col-lg-2",children:Object(O.jsx)("button",{type:"submit",className:"btn btn-outline-secondary",onClick:T,children:"Comment"})})})]})};return Object(O.jsx)("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(156, 156, 156,0.7)"},"data-aos":"fade-down","data-aos-offset":"250",children:Object(O.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable justify-content-center",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header ",children:[Object(O.jsx)("h5",{className:"modal-title",children:Object(O.jsx)("i",{className:"far fa-edit"})}),Object(O.jsx)("button",{type:"button",className:"btn-close",onClick:function(){t(!1)}})]}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsx)(R,{})})]})})})}function z(e){var t=e.dish,c=e.restaurantName,n=Object(a.useState)(!1),s=Object(u.a)(n,2),r=s[0],o=s[1];return Object(O.jsxs)("div",{className:"row mb-4",children:[Object(O.jsx)("h5",{children:c}),Object.entries(t[0]).map((function(e,t){var c=Object(u.a)(e,2),a=(c[0],c[1]);return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"col-12",children:Object(O.jsxs)("div",{className:"row g-0 align-items-center",children:[Object(O.jsx)("div",{className:"col-3 me-4",children:Object(O.jsx)("img",{src:"https://picsum.photos/1200/600?random=10",className:"rounded-start cart_item_img ",alt:"..."})}),Object(O.jsx)("div",{className:"col-4 text-center",children:Object(O.jsx)("h5",{children:a.orderName})}),Object(O.jsx)("div",{className:"col-2 cost_item text-center",children:Object(O.jsxs)("h5",{children:["Count\xa0:\xa0",a.count]})}),Object(O.jsx)("div",{className:"col cost_item text-center",children:Object(O.jsx)("div",{})})]})}),Object(O.jsx)("hr",{className:"mt-4"})]},t)})),Object(O.jsx)("div",{className:"row justify-content-end",children:Object(O.jsxs)("div",{className:"col text-end",children:[Object(O.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){o(!0)},children:"\u8a55\u50f9"}),"\xa0",r&&Object(O.jsx)(q,{hide:o})]})})]})}function K(){var e=Object(a.useContext)(h),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)([]),r=Object(u.a)(s,2),o=r[0],i=r[1],b=Object(a.useState)(""),f=Object(u.a)(b,2),x=f[0],p=f[1];return Object(a.useEffect)((function(){g({headers:{Authorization:"Bearer ".concat(c.token)}}).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("OK"!==t.statusText){e.next=7;break}return e.next=3,t.data;case 3:c=e.sent,p(c._id),e.next=8;break;case 7:401===t.status?window.location.reload():n((function(e){return Object(j.a)(Object(j.a)({},e),{},{details:null})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){var e;""!==x&&(e=x,N.get("/orderRecord/".concat(e))).then((function(e){i(e.data.history[0])})).catch((function(e){console.log(e)}))}),[x]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(E,{}),Object(O.jsx)("div",{className:"container cartkv",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-3 col-lg-1 backtoshop",children:Object(O.jsxs)(m.b,{to:"/Homepage",style:{textDecoration:null,color:"black"},children:[Object(O.jsx)("i",{className:"fas fa-arrow-left"}),"\xa0Back"]})}),Object(O.jsx)("div",{className:"col",children:Object(O.jsx)("h5",{style:{textAlign:"center"},children:"Shopping Record"})}),Object(O.jsx)("hr",{}),o.map((function(e){var t=e.dish,c=e.restaurantName;return Object(O.jsx)(z,{dish:t,restaurantName:c})}))]})})]})}function G(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(E,{}),Object(O.jsx)(L,{name:"Add",title:"\u65b0\u589e\u8cc7\u8a0a"})]})}var V=c(6),$=["auth","component"],W=["auth","component"];var Y=function(e){var t=e.auth,c=e.component,a=Object(o.a)(e,$);return Object(O.jsx)(V.Route,Object(j.a)(Object(j.a)({},a),{},{render:function(){return null===t.token?Object(O.jsx)(c,{}):t.token?Object(O.jsx)(V.Redirect,{to:"/Homepage"}):Object(O.jsx)(B,{})}}))},Q=function(e){var t=e.auth,c=e.component,a=Object(o.a)(e,W);return Object(O.jsx)(V.Route,Object(j.a)(Object(j.a)({},a),{},{render:function(){return t.token?Object(O.jsx)(c,{}):null===t.token?Object(O.jsx)(V.Redirect,{to:"/SignIn"}):Object(O.jsx)(B,{})}}))},X=function(){var e=Object(a.useContext)(h),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useCallback)((function(){v.post("/refreshToken").then(function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("OK"!==t.statusText){e.next=5;break}return e.next=3,t.data;case 3:c=e.sent,n((function(e){return Object(j.a)(Object(j.a)({},e),{},{token:c.token})}));case 5:setTimeout(s,3e5);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),n((function(e){return Object(j.a)(Object(j.a)({},e),{},{token:null})}))}))}),[n]);Object(a.useEffect)((function(){s()}),[s]);var r=Object(a.useCallback)((function(e){"logout"===e.key&&window.location.reload()}),[]);return Object(a.useEffect)((function(){return window.addEventListener("storage",r),function(){window.removeEventListener("storage",r)}}),[r]),Object(O.jsx)(m.a,{children:Object(O.jsxs)(V.Switch,{children:[Object(O.jsx)(Y,{exact:!0,path:"/",auth:c,component:w}),Object(O.jsx)(Y,{path:"/SignUp",auth:c,component:y}),Object(O.jsx)(Q,{path:"/Homepage",auth:c,component:M}),Object(O.jsx)(Q,{path:"/Cart",auth:c,component:J}),Object(O.jsx)(Q,{path:"/Record",auth:c,component:K}),Object(O.jsx)(Q,{path:"/Edit",auth:c,component:G})]})})},Z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,78)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(f,{children:Object(O.jsx)(I,{children:Object(O.jsx)(X,{})})})}),document.getElementById("root")),Z()}},[[77,1,2]]]);
//# sourceMappingURL=main.c85180b5.chunk.js.map